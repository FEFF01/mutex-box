{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./js/test_data.js","webpack:///./js/mutex_model.ts","webpack:///./js/mutex_box.ts","webpack:///./node_modules/input-listener/dist/js/input_listener.js","webpack:///./js/test.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","get_models","left","top","width","height","colspan","rowspan","innerHTML","col","row","capture","e","target","tagName","right","bottom","style","border","borderWidth","space","get_option","ncols","Math","min","innerWidth","STATES","models","reduce","model","max","model_map","Array","model_list","_ncols","this","concat","splice","length","dirty_data","_fill","MutexModel","USE_CHECK","FILL_EACHMODEL","append","fill","clear","index","indexOf","count","undefined","remove","move","v2","flags","USE_OFFSET","getModel","format","rect","round","trim","ceil","changed_models","idx","nstep","_pathTest","push","nrows","max_offset","optimal_col","test_model","max_col","offset","alloc","before_rect","trimmed_rect","crossed_models","cover","slice","crossed_rect","calcWrap","abs","_compress","indenting_models","models_nrow","capture_models","capture_features","capture_nindents","new_capture_models","new_capture_features","new_capture_nindents","sort","b","nindents","col_end","feature","loss_nindent","item","model_nindent","apply","Number","next_col","row_end","under_model","cm_idx","nindent","im_idx","map","USE_EACHOFFSET","mask","result","wrap","calcOffset","flee_rect","target_rect","arg","next_model","isFinite","isNaN","list_index","pop","wrap_rect","ec","er","oc","or","ic","ir","r_end","c_end","use_bw","hf","vf","trimmed_offset","lw","rw","bw","tw","sorted_directions","j","lastIndexOf","InputListener","vessel","boxes","option","inputListener","target_box","_longtap_timeout","_client_width","dragStart","getBoundingClientRect","_left","clientX","_top","clientY","_get_box","preventDefault","dragging","dragMove","clearTimeout","setTimeout","_put_box","dragEnd","_window_resize","clientWidth","_update","is_release","box","ceil_size","cellSize","resize","activate","disable","removeEventListener","addEventListener","add","update","new_values","_width","_height","px","py","_hit","distance","Function","res","_x","space_left","_y","space_top","_w","space_right","_h","space_bottom","zx","zy","zd","sqrt","radian","atan2","r_h","atan","_h_rv","PI","_h_pi","cos","capture_top","capture_right","capture_bottom","capture_left","MutexBox","default","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","iterator","constructor","configurable","writable","ReferenceError","setPrototypeOf","getPrototypeOf","__proto__","_","TypeError","u","f","rotate","pinch","dragMove2","click","_activated_listener","_registered_listener","keyDown","_parts","_reference","keyUp","keyPress","_bm","_listener_options","_listener_status","_points","_identifiers","EVENT_CONFIG","MOUSE_EVENT_ID","pow","button","changedTouches","identifier","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","KEY_DOWN","KEY_UP","KEY_PRESS","CURSOR_EVENT_HANDLES","IS_DRAG","IS_ROTATE","IS_PINCH","PATTERN_MAP","arguments","forEach","getOwnPropertyDescriptors","defineProperties","_PRIVATE_METHODS","update_key_listener","match_keys","match","toLocaleLowerCase","isArray","next","done","get_keys","code","_LISTENER_PREPROCESSOR","split","_listeners","_parent","_key","_path","join","y","v","h","_mesh_value","devicePixelRatio","_process_status","_process_values","kd_tasks","cursorDown","_max_points","activated_listener","_registPoint","_move","pageX","mx","pageY","my","dx","dy","_move2","sd","E","O","g","ra","cursorMove","eventDispenser","_leave","setListener","targetTouches","cursorUp","some","registListener","updateListener","test","_is_mouse_event","require","document","createElement","className","body","appendChild","zIndex","bind_element","mutexBox","li","element","set","val","btn_col_inc","onclick","btn_col_dec","btn_trim","btn_add","console","log"],"mappings":"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","file":"js/test.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","function get_models() {\r\n    let left = 0, top = 0, width = 0, height = 0;\r\n    let models = [\r\n        {\r\n            left, top, width, height,\r\n            colspan: 8,\r\n            rowspan: 3,\r\n            innerHTML:\r\n                `\r\n    可以在初始化中指定默认参数\r\n<code>\r\n{\r\n    //指定容器横向被分为多少格（默认值为足够初始化的最小值）\r\n    ncols: 16,\r\n    //指定默认空白区域（默认全0）\r\n    space: { left: 2, right: 2, top: 4, bottom: 0 }, \r\n    //指定默认拖拽捕获区域（默认全0，表示除了空白外的区域可拖拽）\r\n    capture: { top: 0, right: 0, bottom: 0, left: 0 }\r\n}\r\n</code>\r\n    `\r\n        },\r\n        {\r\n            left, top, width, height,\r\n            col: 9,\r\n            row: 0,\r\n            colspan: 7,\r\n            rowspan: 3,\r\n            innerHTML:\r\n                `\r\n                <br><button style=\"color:white;background-color:black;\">只允许从该按钮上方拖拽</button>\r\n<code>\r\n{\r\n    col: 9,\r\n    row: 0,\r\n    colspan: 7,\r\n    rowspan: 4,\r\n    capture: (e, t) => t.target.tagName === \"BUTTON\"\r\n}\r\n</code>\r\n    `,\r\n            capture: (e, t) => t.target.tagName === \"BUTTON\"\r\n        },\r\n        {\r\n            left, top, width, height,\r\n            colspan: 4,\r\n            rowspan: 7,\r\n            innerHTML:\r\n                `\r\n                <span style=\"\r\n                display:block;\r\n                width:0;height:0;\r\n                z-index: 1000;\r\n                border: 20px solid;\r\n                border-color: aqua blue red green;\r\n                \"></span>\r\n                （类似上图的区域划分）<br>\r\n                只能在以下区域拖拽<br>\r\n                (1):容器中心点和顶边做三角形<br>\r\n                (2):容器右侧边和距离右侧边 10px 的平行线做四边形<br>\r\n                (3):容器中心点和距离底部 10px 的平行线做三角形<br>\r\n                (3):容器左侧边和距离左侧边 10px 的平行线做四边形<br>\r\n<code>\r\n{\r\n    colspan: 4,\r\n    rowspan: 6,\r\n    capture: {\r\n        top: 0,\r\n        right: -10,\r\n        bottom: 10,\r\n        left: -10\r\n    }\r\n}\r\n</code>\r\n    `,\r\n            capture: {\r\n                top: 0,\r\n                right: -10,\r\n                bottom: 10,\r\n                left: -10,\r\n            }\r\n        },\r\n        {\r\n            left, top, width, height,\r\n            colspan: 4,\r\n            rowspan: 4,\r\n            style: {\r\n                border: \"solid black\",\r\n                borderWidth: \"10px 20px\"\r\n            },\r\n            innerHTML:\r\n                `\r\n    只能从该容器边框部分拖拽\r\n<code>\r\n{\r\n    colspan: 4,\r\n    rowspan: 4,\r\n    capture: {\r\n        top: -10,\r\n        right: -20,\r\n        bottom: -10,\r\n        left: -20\r\n    }\r\n}\r\n</code>\r\n    `,\r\n            capture: {\r\n                top: -10,\r\n                right: -20,\r\n                bottom: -10,\r\n                left: -20\r\n            },\r\n        },\r\n        {\r\n            left, top, width, height,\r\n            colspan: 4,\r\n            rowspan: 5,\r\n            innerHTML:\r\n                `\r\n                单独指定空白区域:<br>\r\n                (1)顶部 20px ,底部 30px 为空白<br>\r\n                (2)左右两侧溢出贴合 space-right space-left 值为 2 的容器\r\n<code>\r\n{\r\n    colspan: 4,\r\n    rowspan: 5,\r\n    space: {\r\n        top: 20,\r\n        right: -2,\r\n        bottom: 30,\r\n        left: -2\r\n    }\r\n}\r\n</code>\r\n    `,\r\n            space: {\r\n                top: 20,\r\n                right: -2,\r\n                bottom: 30,\r\n                left: -2\r\n            },\r\n        },\r\n        {\r\n            left, top, width, height,\r\n            col:8,\r\n            row:0,\r\n            colspan: 4,\r\n            rowspan: 3,\r\n            innerHTML:\r\n                `\r\n                不指定 \"col\" \"row\" 或指定了非法值会自动根据现有摆放状态自动选择合适位置放置\r\n<code>\r\n{\r\n    col:8,\r\n    row:0,\r\n    colspan: 4,\r\n    rowspan: 3\r\n}\r\n</code>\r\n    `,\r\n        },\r\n    ];\r\n    return models;\r\n}\r\nfunction get_option() {\r\n    return {\r\n        ncols: Math.min(window.innerWidth / 70 | 0, 16),\r\n        space: { left: 2, right: 2, top: 4, bottom: 0 },\r\n        capture: { top: 0, right: 0, bottom: 0, left: 0 }\r\n    };\r\n}\r\nexport { get_models, get_option };","\r\nimport { Model, Rect } from './interfaces';\r\n\r\nenum STATES {\r\n    USE_CHECK = 0x01,\r\n    FILL_EACHMODEL = 0x10,\r\n    USE_OFFSET = 0x100,\r\n    USE_EACHOFFSET = 0x1000,\r\n};\r\nclass MutexModel {\r\n    protected model_map: Array<Model | undefined> = new Array();\r\n    protected model_list: Array<Model> = new Array();\r\n    static STATES = STATES;\r\n    _ncols: number = null;\r\n    constructor(\r\n        models: Array<Model>,\r\n        ncols: number =\r\n            models.reduce(\r\n                (ncols, model) => Math.max(ncols, (model.col || 0) + (model.colspan || 1))\r\n                , 1\r\n            )\r\n    ) {\r\n        this.model_list = this.model_list.concat(models);\r\n        this.ncols = ncols;\r\n    }\r\n    get ncols(): number {\r\n        return this._ncols;\r\n    }\r\n    set ncols(ncols: number) {\r\n        if (ncols !== this._ncols) {\r\n            this._ncols = ncols;\r\n            this.model_map.splice(0, this.model_map.length);\r\n            let model_list = this.model_list.splice(0, this.model_list.length);\r\n            let dirty_data = this._fill(model_list, MutexModel.STATES.USE_CHECK | MutexModel.STATES.FILL_EACHMODEL);\r\n            this.append(dirty_data);\r\n        }\r\n    }\r\n\r\n    fill(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        this._fill(models, MutexModel.STATES.FILL_EACHMODEL);\r\n    }\r\n    clear(model: Model) {\r\n        let index = this.model_list.indexOf(model), count = 0;\r\n        ~index || (this.model_list.splice(index, 1));\r\n        while (~(index = this.model_map.indexOf(model))) {\r\n            count++;\r\n            this.model_map[index] = undefined;\r\n        }\r\n        return count;\r\n    }\r\n    remove(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        this._fill(models);\r\n    }\r\n    move(models: Array<Model> | Model, v2: [number, number] | Array<[number, number]>, flags: number = 0) {\r\n        models instanceof Array || (models = [models]);\r\n        this.remove(models);\r\n        this._fill(models, flags | MutexModel.STATES.FILL_EACHMODEL | MutexModel.STATES.USE_OFFSET, v2);\r\n    }\r\n    getModel(col: number, row: number): Model | undefined {\r\n        if (col >= 0 && row >= 0 && col < this.ncols) {\r\n            return this.model_map[col + row * this.ncols];\r\n        }\r\n    }\r\n    format(rect: Rect, col = rect.col, row = rect.row): Rect {\r\n        rect.col = Math.round(Math.max(Math.min(col, this.ncols - rect.colspan), 0));\r\n        rect.row = Math.round(Math.max(row, 0));\r\n        return rect;\r\n    }\r\n    trim(): Array<Model> {\r\n        let height = Math.ceil(this.model_map.length / this.ncols);\r\n        let changed_models = [];\r\n        for (let row = 1; row < height; row++) {\r\n            for (let col = 0; col < this.ncols; col++) {\r\n                let idx = row * this.ncols + col;\r\n                let model = this.model_map[idx];\r\n                if (model && model.row === row) {\r\n                    let nstep = this._pathTest([model], [0, -row - 1], model);\r\n                    if (nstep > 0) {\r\n                        changed_models.push(model);\r\n                        this.move([model], [0, -nstep]);\r\n                    }\r\n                    col += model.colspan - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return changed_models;\r\n    }\r\n\r\n    append(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        for (const model of models) {\r\n            model.colspan > this.ncols && (model.colspan = this.ncols);\r\n            let nrows = Math.ceil(this.model_map.length / this.ncols);\r\n            let max_offset = 0, optimal_col = 0;\r\n            let test_model = { col: 0, row: nrows, colspan: model.colspan, rowspan: model.rowspan };\r\n            for (let col = 0, max_col = this.ncols - model.colspan; col <= max_col; col++) {\r\n                test_model.col = col;\r\n                let offset = this._pathTest([test_model], [0, -nrows - 1], test_model);\r\n                if (max_offset < offset) {\r\n                    max_offset = offset as number;\r\n                    optimal_col = col;\r\n                }\r\n            }\r\n            model.col = optimal_col;\r\n            model.row = nrows - max_offset;\r\n            this._fill([model], MutexModel.STATES.FILL_EACHMODEL);\r\n        }\r\n\r\n    }\r\n    alloc(rect: Rect, before_rect?: Rect): Array<Model> {\r\n        let trimmed_rect = this.format({ ...rect });\r\n        let crossed_models = this.cover(trimmed_rect);\r\n        let changed_models = crossed_models.slice();\r\n        if (crossed_models.length === 0) {\r\n            return changed_models;\r\n        }\r\n        let crossed_rect = this.calcWrap(crossed_models);\r\n        if (\r\n            before_rect &&\r\n            trimmed_rect.col === crossed_rect.col &&\r\n            trimmed_rect.row === crossed_rect.row &&\r\n            before_rect.colspan === crossed_rect.colspan &&\r\n            before_rect.rowspan === crossed_rect.rowspan &&\r\n            (Math.abs(rect.col - crossed_rect.col) + Math.abs(rect.row - crossed_rect.row)) /\r\n            (before_rect.colspan + before_rect.rowspan) < 0.06 &&\r\n            Math.abs(before_rect.col - crossed_rect.col) / before_rect.colspan +\r\n            Math.abs(before_rect.row - crossed_rect.row) / before_rect.rowspan > 1\r\n        ) {\r\n            this.move(\r\n                crossed_models,\r\n                [before_rect.col - crossed_rect.col, before_rect.row - crossed_rect.row]\r\n            );\r\n        } else if (\r\n            (\r\n                crossed_models.length > 1 &&\r\n                crossed_rect.colspan + crossed_rect.rowspan > (trimmed_rect.colspan + trimmed_rect.rowspan) * 2\r\n            ) ||\r\n            !this._compress(trimmed_rect, crossed_models, crossed_rect, rect)\r\n        ) {\r\n            for (let i = 0; i < crossed_models.length; i++) {\r\n                if (this._compress(trimmed_rect, [crossed_models[i]], crossed_models[i] as Rect, undefined, false)) {\r\n                    crossed_models.splice(i--, 1);\r\n                }\r\n            }\r\n            if (crossed_models.length === 0) {\r\n                return changed_models;\r\n            }\r\n\r\n            let indenting_models: Model[] = [];\r\n            let models_nrow: number[] = [];\r\n\r\n            crossed_rect = this.calcWrap(crossed_models);\r\n            let colspan = trimmed_rect.colspan -\r\n                Math.max(crossed_rect.col - trimmed_rect.col, 0) -\r\n                Math.max(\r\n                    trimmed_rect.col + trimmed_rect.colspan -\r\n                    crossed_rect.colspan - crossed_rect.col\r\n                    , 0\r\n                );\r\n\r\n            let capture_models: Model[] = [\r\n                {\r\n                    col: Math.max(trimmed_rect.col, crossed_rect.col),\r\n                    row: trimmed_rect.row,\r\n                    colspan,\r\n                    rowspan: 0\r\n                }\r\n            ];\r\n            let capture_features: { [key: number]: Array<{ row: number, rowspan: number }> } = {};\r\n            let capture_nindents: Array<number[] | number> = [new Array(colspan).fill(trimmed_rect.rowspan)];\r\n\r\n\r\n            while (capture_models.length) {\r\n                let new_capture_models: Model[] = [];\r\n                let new_capture_features: { [key: number]: Array<{ row: number, rowspan: number }> } = {};\r\n                let new_capture_nindents: Array<number[] | number> = [];\r\n                for (const key in capture_features) {\r\n                    capture_features[key].sort((a, b) => a.row - b.row);\r\n                }\r\n                for (let i = 0; i < capture_models.length; i++) {\r\n                    let model = capture_models[i];\r\n                    let nindents = capture_nindents[i] as Array<number>;\r\n                    for (let col = model.col, col_end = col + model.colspan; col < col_end; col++) {\r\n                        let feature = capture_features[col];\r\n                        if (feature) {\r\n                            let loss_nindent = 0;\r\n                            for (let index = 0; index < feature.length - 1; index++) {\r\n                                let item = feature[index];\r\n                                if (item.row < model.row) {\r\n                                    loss_nindent += feature[index + 1].row - (item.row + item.rowspan);\r\n                                } else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            nindents[col - model.col] -= loss_nindent;\r\n                        }\r\n                    }\r\n                    let model_nindent = Math.max.apply(Number, nindents);\r\n                    if (model_nindent > 0) {\r\n                        capture_nindents[i] = model_nindent;\r\n                        let index = indenting_models.indexOf(model);\r\n                        if (index === -1) {\r\n                            index = indenting_models.length;\r\n                            indenting_models.push(model);\r\n                            models_nrow.push(model_nindent);\r\n                        } else {\r\n                            if (models_nrow[index] >= model_nindent) {\r\n                                //console.log(models_nrow[index] , model_nindent);\r\n                                continue;\r\n                            } else {\r\n                                models_nrow[index] = model_nindent;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        capture_models.splice(i, 1);\r\n                        capture_nindents.splice(i, 1);\r\n                        i--;\r\n                    }\r\n                }\r\n                for (let index = 0; index < capture_models.length; index++) {\r\n                    let model = capture_models[index];\r\n                    let model_nindent = capture_nindents[index] as number;\r\n                    next_col:\r\n                    for (let col = model.col, col_end = col + model.colspan; col < col_end; col++) {\r\n                        for (\r\n                            let row = model.row + model.rowspan, row_end = row + model_nindent;\r\n                            row < row_end;\r\n                            row++\r\n                        ) {\r\n                            let under_model = this.model_map[col + row * this.ncols];\r\n                            if (under_model) {\r\n                                let cm_idx = new_capture_models.indexOf(under_model);\r\n                                let nindents: number[];\r\n                                let nindent = row_end - row + Math.max(model.row - under_model.row, 0);\r\n                                if (cm_idx === -1) {\r\n                                    let im_idx = indenting_models.indexOf(under_model);\r\n                                    if (im_idx >= 0 && models_nrow[im_idx] >= nindent) {\r\n                                        continue next_col;\r\n                                    }\r\n                                    new_capture_models.push(under_model);\r\n                                    new_capture_nindents.push(nindents = new Array(under_model.colspan).fill(0));\r\n                                    let feature = new_capture_features[col] || (new_capture_features[col] = []);\r\n                                    feature.push({\r\n                                        row: under_model.row,\r\n                                        rowspan: under_model.rowspan\r\n                                    });\r\n                                } else {\r\n                                    nindents = new_capture_nindents[cm_idx] as number[];\r\n                                }\r\n                                nindents[col - under_model.col] = Math.max(nindents[col - under_model.col], nindent);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                capture_models = new_capture_models;\r\n                capture_features = new_capture_features;\r\n                capture_nindents = new_capture_nindents;\r\n            }\r\n\r\n\r\n            indenting_models.splice(0, 1);\r\n            models_nrow.splice(0, 1);\r\n\r\n            this.move(indenting_models, models_nrow.map((row): [number, number] => [0, row]), MutexModel.STATES.USE_EACHOFFSET);\r\n            changed_models = changed_models.concat(indenting_models);\r\n        }\r\n        return changed_models;\r\n    }\r\n    cover(mask: Rect): Array<Model> {\r\n        let result = [];\r\n        let col = mask.col, row = mask.row;\r\n        for (let r = 0; r < mask.rowspan; r++) {\r\n            for (let c = 0; c < mask.colspan; c++) {\r\n                let model = this.model_map[(c + col) + (r + row) * this.ncols];\r\n                if (model !== undefined) {\r\n                    ~result.indexOf(model) || result.push(model);\r\n                    let right = model.colspan + model.col - 1;\r\n                    c + col < right && (c = right - col);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    calcWrap(models: Array<Model>): Rect {\r\n        let wrap = {\r\n            col: models[0].col,\r\n            row: models[0].row,\r\n            colspan: models[0].colspan,\r\n            rowspan: models[0].rowspan\r\n        };\r\n        for (let i = 1; i < models.length; i++) {\r\n            let model = models[i];\r\n            wrap.col > model.col && (wrap.colspan += wrap.col - model.col, wrap.col = model.col);\r\n            wrap.row > model.row && (wrap.rowspan += wrap.row - model.row, wrap.row = model.row);\r\n            wrap.colspan + wrap.col < model.col + model.colspan &&\r\n                (wrap.colspan += model.col + model.colspan - wrap.col - wrap.colspan);\r\n            wrap.rowspan + wrap.row < model.row + model.rowspan &&\r\n                (wrap.rowspan += model.row + model.rowspan - wrap.row - wrap.rowspan);\r\n        }\r\n        return wrap;\r\n    }\r\n    calcOffset(flee_rect: Rect, target_rect: Rect) {\r\n        return {\r\n            l: flee_rect.col - (target_rect.col + target_rect.colspan),\r\n            r: flee_rect.col + flee_rect.colspan - target_rect.col,\r\n            t: flee_rect.row - (target_rect.row + target_rect.rowspan),\r\n            b: flee_rect.row + flee_rect.rowspan - target_rect.row,\r\n        }\r\n    }\r\n    private _fill(models: Model[], flags: number | undefined = 0, arg?: any): Array<Model> | undefined {\r\n        const STATES = MutexModel.STATES;\r\n        let dirty_data: Array<Model> | undefined = flags & STATES.USE_CHECK ? [] : undefined;\r\n        let model_map = this.model_map;\r\n        let model_list = this.model_list;\r\n        let ncols = this.ncols;\r\n        next_model:\r\n        for (let index = 0; index < models.length; index++) {\r\n            let model = models[index];\r\n\r\n\r\n            if (flags & STATES.USE_CHECK) {\r\n                isFinite(model.colspan) || (model.colspan = 1);\r\n                isFinite(model.rowspan) || (model.rowspan = 1);\r\n                if (isNaN(model.col + model.row) || model.col + model.colspan > ncols) {\r\n                    dirty_data.push(model);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let list_index = model_list.indexOf(model);\r\n            if (flags & STATES.FILL_EACHMODEL) {\r\n                if (list_index === -1) {\r\n                    model_list.push(model);\r\n                } else {\r\n                    continue;\r\n                }\r\n            } else {\r\n                if (list_index >= 0) {\r\n                    model_list.splice(list_index, 1);\r\n                }\r\n            }\r\n\r\n            if (flags & STATES.USE_EACHOFFSET) {\r\n                model.col += arg[index][0];\r\n                model.row += arg[index][1];\r\n            } else if (flags & STATES.USE_OFFSET) {\r\n                model.col += arg[0];\r\n                model.row += arg[1];\r\n            }\r\n            let { col, row, colspan, rowspan } = model;\r\n            //row + rowspan > this.nrows && (this.nrows = row + rowspan);\r\n            for (let r = 0; r < rowspan; r++) {\r\n                for (let c = 0; c < colspan; c++) {\r\n                    let idx = (c + col) + (r + row) * ncols;\r\n                    if (!(flags & STATES.USE_CHECK) || model_map[idx] === undefined) {\r\n                        model_map[idx] = flags & STATES.FILL_EACHMODEL ? model : arg;\r\n                    } else {\r\n                        do {\r\n                            while (c--) {\r\n                                model_map[(c + col) + (r + row) * ncols] = undefined;\r\n                            }\r\n                            c = colspan;\r\n                        } while (r--)\r\n                        flags & STATES.FILL_EACHMODEL && (model_list.pop());\r\n                        dirty_data.push(model);\r\n                        continue next_model;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dirty_data;\r\n    }\r\n    private _pathTest(models: Model[], v2: [number, number], wrap_rect: Model = this.calcWrap(models)): number | boolean {\r\n        let ec = v2[0] | 0, er = v2[1] | 0, oc = 0, or = 0, nstep = 0;\r\n        let ic = ec && ec / Math.abs(ec), ir = er && er / Math.abs(er);\r\n        while (oc !== ec || or !== er) {\r\n            oc !== ec ? (oc = oc + ic) : (or = or + ir);\r\n            if (\r\n                wrap_rect.col + oc < 0 ||\r\n                wrap_rect.col + oc + wrap_rect.colspan > this.ncols ||\r\n                wrap_rect.row + or < 0\r\n            ) {\r\n                return nstep;\r\n            }\r\n            for (const model of models) {\r\n                for (let r = model.row, r_end = r + model.rowspan; r < r_end; r++) {\r\n                    for (let c = model.col, c_end = c + model.colspan; c < c_end; c++) {\r\n                        let idx = c + oc + (r + or) * this.ncols;\r\n                        if (this.model_map[idx] && models.indexOf(this.model_map[idx]) === -1) {\r\n                            return nstep;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            nstep += 1;\r\n        }\r\n        return true;\r\n    }\r\n    private _compress(\r\n        trimmed_rect: Rect,\r\n        crossed_models: Array<Model> = this.cover(trimmed_rect),\r\n        crossed_rect: Rect = this.calcWrap(crossed_models),\r\n        rect?: Rect,\r\n        use_bw = true\r\n    ): boolean {\r\n        let hf = trimmed_rect.rowspan / trimmed_rect.colspan/* / crossed_rect.rowspan*/;\r\n        let vf = crossed_rect.colspan / crossed_rect.rowspan/* / trimmed_rect.colspan*/;\r\n        let trimmed_offset = this.calcOffset(trimmed_rect, crossed_rect);\r\n        let offset = rect ? this.calcOffset(rect, crossed_rect) : trimmed_offset;\r\n        let lw: any[] = [Math.abs(hf * offset.l), [trimmed_offset.l, 0]], rw: any[] = [Math.abs(hf * offset.r), [trimmed_offset.r, 0], lw];\r\n        lw.push(rw); rw.push(lw);\r\n        let tw: any[] = [Math.abs(vf * offset.t), [0, trimmed_offset.t]], bw: any[];\r\n        if (use_bw) {\r\n            bw = [Math.abs(vf * offset.b), [0, trimmed_offset.b]];\r\n            tw.push(bw); bw.push(tw);\r\n        }\r\n        let sorted_directions = (use_bw ? [lw, rw, tw, bw] : [lw, rw, tw]).sort((a, b) => a[0] - b[0]);\r\n        for (let i = 0; i < sorted_directions.length; i++) {\r\n            let j = sorted_directions.lastIndexOf(sorted_directions[i][2]);\r\n            if (j > i) {\r\n                sorted_directions.splice(j, 1);\r\n                sorted_directions.splice(i + 1, 0, sorted_directions[i][2]);\r\n            }\r\n            if (this._pathTest(crossed_models, sorted_directions[i][1], crossed_rect) === true) {\r\n                this.move(crossed_models, sorted_directions[i][1]);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default MutexModel;//这里糊一个根导出，让 MutexModel 可以在其他模块被定义\r\n//module.exports = MutexModel;//使用 module.exports 是为了import 和 require 都直接可用","\r\n\r\n\r\nimport { Model, Rect, layout, Box, CaptureFunction, Option } from './interfaces';\r\n\r\nimport MutexModel from './mutex_model';\r\nconst InputListener = require('input-listener');\r\n\r\n\r\nclass MutexBox extends MutexModel {\r\n    inputListener?: typeof InputListener = null;\r\n    space: layout = { top: 0, right: 0, bottom: 0, left: 0 };\r\n    capture: layout | CaptureFunction = { top: 0, right: 0, bottom: 0, left: 0 };\r\n    private target_box?: Box = null;\r\n    static MutexModel = MutexModel;\r\n    private _longtap_timeout?: number = null;\r\n    private _client_width = 0;\r\n    constructor(\r\n        public vessel: HTMLElement,\r\n        boxes?: Array<Box>,\r\n        option: Option = {}\r\n    ) {\r\n        super(boxes, option.ncols);\r\n        this.vessel = vessel;\r\n        this.inputListener = new InputListener(vessel, {\r\n            dragStart: this.dragStart,\r\n            dragMove: this.dragMove,\r\n            dragEnd: this.dragEnd,\r\n        });\r\n        this.resize(option);\r\n        this.activate();\r\n    }\r\n    disable() {\r\n        window.removeEventListener(\"resize\", this._window_resize);\r\n        this.inputListener.disable();\r\n    }\r\n    activate() {\r\n        this._window_resize();\r\n        window.addEventListener(\"resize\", this._window_resize);\r\n        this.inputListener.activate();\r\n    }\r\n    trim(): any {\r\n        this._update(super.trim() as Array<Box>);\r\n    }\r\n    alloc(rect: Rect, before_rect?: Rect): any {\r\n        this._update(super.alloc(rect, before_rect) as Array<Box>);\r\n    }\r\n    remove(boxes: Array<Box> | Box) {\r\n        super.remove(boxes);\r\n    }\r\n    add(boxes: Array<Box> | Box) {\r\n        boxes instanceof Array || (boxes = [boxes]);\r\n        for (const box of boxes) {\r\n            if (box.col >= 0 && box.col + box.colspan <= this.ncols && box.row >= 0) {\r\n                this.alloc(box as Rect);\r\n                this.fill(box);\r\n            } else {\r\n                this.append(box);\r\n            }\r\n        }\r\n        this._update(boxes);\r\n    }\r\n    resize(option: Option | number) {\r\n        if (option instanceof Object) {\r\n            option.space && (this.space = option.space);\r\n            option.capture && (this.capture = option.capture);\r\n            isNaN(option.ncols) || (this.ncols = option.ncols);\r\n        } else {\r\n            this.ncols = option;\r\n        }\r\n        this._client_width = this.vessel.clientWidth;\r\n        this.update();\r\n    }\r\n    update(box?: Box, new_values?: Model) {\r\n        if (box) {\r\n            if (new_values instanceof Object) {\r\n                //Object.assign(box, new_values);\r\n                for (const key in new_values) {\r\n                    box[key] = new_values[key];\r\n                }\r\n            }\r\n            this.clear(box);\r\n            this.alloc(box as Rect);\r\n            this.fill(box);\r\n            this._update([box]);\r\n        } else {\r\n            this._update(this.model_list as Array<Box>);\r\n        }\r\n    }\r\n    dragStart = (e: TouchEvent | MouseEvent, t: Touch | MouseEvent) => {\r\n        //e.preventDefault();\r\n        let rect = this.vessel.getBoundingClientRect();\r\n        let _left = t.clientX - rect.left, _top = t.clientY - rect.top;\r\n        //let { col, row } = \r\n        this.target_box = this._get_box(_left, _top, e, t);\r\n        if (this.target_box) {\r\n            e.preventDefault();\r\n            this.target_box.dragging = true;\r\n            this.remove(this.target_box);\r\n            //this._md = 0;\r\n            return;\r\n        }\r\n        return true;\r\n    }\r\n    //_md = 0;\r\n    dragMove = (e: TouchEvent | MouseEvent, v2: [number, number]) => {\r\n        //this._md += v2[0] * v2[0] + v2[1] * v2[1];\r\n        this.target_box.left += v2[0];\r\n        this.target_box.top += v2[1];\r\n        if (this._longtap_timeout) {\r\n            window.clearTimeout(this._longtap_timeout);\r\n            this._longtap_timeout = null;\r\n        }\r\n        this._longtap_timeout = window.setTimeout(this._put_box, 300);\r\n    }\r\n    dragEnd = (e: TouchEvent | MouseEvent) => {\r\n        this._longtap_timeout && window.clearTimeout(this._longtap_timeout);\r\n        this._put_box(true);\r\n    }\r\n    private _update(boxes: Array<Box>) {\r\n        let ceil_size = this.cellSize;\r\n        let _left, _top, _width, _height;\r\n        for (const box of boxes) {\r\n            let { left = 0, right = 0, top = 0, bottom = 0 } = box.space || this.space;\r\n            _left = ceil_size * box.col + left;\r\n            _top = ceil_size * box.row + top;\r\n            _width = ceil_size * box.colspan - left - right;\r\n            _height = ceil_size * box.rowspan - top - bottom;\r\n\r\n            _left !== box.left && (box.left = _left);\r\n            _top !== box.top && (box.top = _top);\r\n            _width !== box.width && (box.width = _width);\r\n            _height !== box.height && (box.height = _height);\r\n        }\r\n    }\r\n    get cellSize() {\r\n        return this._client_width / this.ncols;\r\n    }\r\n    private _window_resize = (e?: Event) => {\r\n        if (this._client_width !== this.vessel.clientWidth) {\r\n            this._client_width = this.vessel.clientWidth;\r\n            this._update(this.model_list as Array<Box>);\r\n        }\r\n    }\r\n    private _get_box(px: number, py: number, e: TouchEvent | MouseEvent, t: Touch | MouseEvent): Box | undefined {\r\n        let ceil_size = this.cellSize;\r\n        let box: Box | undefined = this.getModel(px / ceil_size | 0, py / ceil_size | 0) as (Box | undefined);\r\n\r\n        function _hit(length: number, distance: number, capture: number): boolean {\r\n            if (capture >= 0) {\r\n                return distance < length - capture;\r\n            } else {\r\n                return distance >= length + capture && distance < length;\r\n            }\r\n        }\r\n        if (box) {\r\n            let capture = box.capture || this.capture;\r\n            if (capture instanceof Function) {\r\n                let res = capture(e, t, box);\r\n                return res === true ? box : (res === false ? undefined : res);\r\n            } else {\r\n                let {\r\n                    top: space_top = 0,\r\n                    right: space_right = 0,\r\n                    bottom: space_bottom = 0,\r\n                    left: space_left = 0\r\n                } = box.space || this.space;\r\n                let {\r\n                    top: capture_top = 0,\r\n                    right: capture_right = 0,\r\n                    bottom: capture_bottom = 0,\r\n                    left: capture_left = 0\r\n                } = capture;\r\n                let _x = box.col * ceil_size + space_left;\r\n                let _y = box.row * ceil_size + space_top;\r\n                let _w = box.colspan * ceil_size - space_right - space_left;\r\n                let _h = box.rowspan * ceil_size - space_top - space_bottom;\r\n\r\n                let zx = px - _x - _w / 2, zy = py - _y - _h / 2;\r\n                let zd = Math.sqrt(zx ** 2 + zy ** 2);\r\n                let radian = Math.atan2(zy, zx);\r\n                let r_h = Math.atan(_w / _h) * 2;\r\n                let r_v = Math.PI - r_h;\r\n                let _h_rv = r_v / 2;\r\n                let _h_pi = Math.PI / 2;\r\n\r\n                switch (true) {\r\n                    case radian < - _h_rv && radian > - r_h - _h_rv://top\r\n                        return _hit(_h / 2, zd * Math.cos(_h_pi + radian), capture_top) && box;\r\n                    case Math.abs(radian) <= _h_rv://right\r\n                        return _hit(_w / 2, zd * Math.cos(radian), capture_right) && box;\r\n                    case radian > _h_rv && radian < _h_rv + r_h://bottom\r\n                        return _hit(_h / 2, Math.abs(zd * Math.cos(_h_pi + radian)), capture_bottom) && box;\r\n                    case Math.abs(radian) >= r_h + _h_rv://left\r\n                        return _hit(_w / 2, Math.abs(zd * Math.cos(radian)), capture_left) && box;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    private _put_box = (is_release?: boolean) => {\r\n        this._longtap_timeout = null;\r\n        let box = this.target_box;\r\n        let ceil_size = this.cellSize;\r\n        let col = box.left / ceil_size, row = box.top / ceil_size;\r\n        this.alloc({\r\n            col, row,\r\n            colspan: box.colspan,\r\n            rowspan: box.rowspan\r\n        }, box as Rect);\r\n        if (is_release === true) {\r\n            box.dragging = false;\r\n            this.format(box as Rect, col, row);\r\n            this.fill(box);\r\n            this._update([box]);\r\n            this.target_box = null;\r\n        }\r\n    }\r\n}\r\n\r\ntry {\r\n    (window as any).MutexBox = MutexBox;\r\n} catch (e) {\r\n\r\n}\r\n\r\n//export default MutexBox;\r\nmodule.exports = MutexBox;//使用 module.exports 是为了import 和 require 都直接可用\r\n\r\n\r\n","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return!t||\"object\"!==i(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var l={rotate:/^rotate$/,pinch:/^pinch$/,dragMove2:/^dragMove2$/,dragStart:/^dragStart$/,dragMove:/^dragMove$/,dragEnd:/^dragEnd$/,click:/^click$/},p=function(){function e(t,r){c(this,e),this._activated_listener={},this._registered_listener={rotate:null,pinch:null,dragMove:null,dragStart:null,dragEnd:null,dragMove2:null,click:null,keyDown:{_parts:[],_reference:0},keyUp:{_reference:0},keyPress:{_reference:0}},this._bm=1,this.target=null,this._listener_options=void 0,this._listener_status={},this._points=[],this._identifiers=[],this.target=t,this._listener_options=r}return f(e,[{key:\"setListener\",value:function(e){for(var t in e)if(!this._listener_status[t]!=!e[t]){var r=d.EVENT_CONFIG[t],n=r[0],i=r[1],s=r[2]||this.target;e[t]?s.addEventListener(n,this[i],this._listener_options):s.removeEventListener(n,this[i],this._listener_options),this._listener_status[t]=!!e[t]}}},{key:\"eventDispenser\",value:function(e,t){if(this._identifiers[0]===d.MOUSE_EVENT_ID)Math.pow(2,e.button)&this._bm&&t(e,e,0);else if(e.changedTouches)for(var r=0;r<e.changedTouches.length;r++){var n=this._identifiers.indexOf(e.changedTouches[r].identifier);-1!==n&&t(e,e.changedTouches[r],n)}}},{key:\"_is_mouse_event\",get:function(){return this._identifiers[0]===d.MOUSE_EVENT_ID}}]),e}();p.EVENT_CONFIG={MOUSE_DOWN:[\"mousedown\",\"cursorDown\"],MOUSE_MOVE:[\"mousemove\",\"cursorMove\",window],MOUSE_UP:[\"mouseup\",\"cursorUp\",window],TOUCH_START:[\"touchstart\",\"cursorDown\"],TOUCH_MOVE:[\"touchmove\",\"cursorMove\",window],TOUCH_END:[\"touchend\",\"cursorUp\",window],TOUCH_CANCEL:[\"touchcancel\",\"cursorUp\",window],KEY_DOWN:[\"keydown\",\"keyDown\"],KEY_UP:[\"keyup\",\"keyUp\"],KEY_PRESS:[\"keypress\",\"keyPress\"]},p.CURSOR_EVENT_HANDLES=Object.keys(l),p.STATES={IS_DRAG:1,IS_ROTATE:2,IS_PINCH:4,MOUSE_DOWN:\"MOUSE_DOWN\",MOUSE_MOVE:\"MOUSE_MOVE\",MOUSE_UP:\"MOUSE_UP\",TOUCH_START:\"TOUCH_START\",TOUCH_MOVE:\"TOUCH_MOVE\",TOUCH_END:\"TOUCH_END\",TOUCH_CANCEL:\"TOUCH_CANCEL\",KEY_DOWN:\"KEY_DOWN\",KEY_UP:\"KEY_UP\",KEY_PRESS:\"KEY_PRESS\"},p.PATTERN_MAP=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l,{},{keyDown:/^\\S+_keyDown$/,keyUp:/^\\S+_keyUp$/,keyPress:/^\\S+_keyPress$/}),p.MOUSE_EVENT_ID=-9007199254740991,p._PRIVATE_METHODS={update_key_listener:function(e,t,r,n){d._PRIVATE_METHODS.match_keys(t,(function(t){var i=e[t];i||(i=e[t]=[]);var s=i.indexOf(r);n?s>=0&&(e._reference--,i.length>1?i.splice(s,1):delete e[t]):(e._reference++,~s||i.push(r))}))},match_keys:function(e,t){var r=e.match(/(\\w+?|\\ )(?=$|\\||\\,|\\+)/g);if(r=r?r.map((function(e){return e.toLocaleLowerCase()})):[],!t)return r;var n=r,i=Array.isArray(n),s=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}if(t(o))break}},get_keys:function(e){return e.code&&e.key!==e.code?[e.key.toLocaleLowerCase(),e.code.toLocaleLowerCase()]:[e.key.toLocaleLowerCase()]}},p._LISTENER_PREPROCESSOR={keyDown:function(e,t,r){var n,i=e.slice(0,-8).split(\",\"),s=r?function(e,r,n){if(n){var i=e[r];if(i){var s=i._listeners.indexOf(t);-1!==s&&(i._listeners.splice(s,1),function e(t){var r=t._parent;--t._reference<=0&&r&&(delete r[t._key],e(r))}(i))}}}:function(e,r,i){var s=e[r];s||((s=e[r]={_parent:e,_key:r,_reference:0,_parts:e._parts.concat(r)})._path=s._parts.join(\"+\"),e._reference++),n.push(s),i&&(s._reference++,s._listeners?-1===s._listeners.indexOf(t)&&s._listeners.push(t):s._listeners=[t])};i.forEach((function(e){n=[this._registered_listener.keyDown],e.split(\"+\").forEach((function(e,t,r){var i=n,o=d._PRIVATE_METHODS.match_keys(e),a=r.length===t+1;n=[];var _=i,c=Array.isArray(_),u=0;for(_=c?_:_[Symbol.iterator]();;){var f;if(c){if(u>=_.length)break;f=_[u++]}else{if((u=_.next()).done)break;f=u.value}var l=f,p=o,y=Array.isArray(p),v=0;for(p=y?p:p[Symbol.iterator]();;){var h;if(y){if(v>=p.length)break;h=p[v++]}else{if((v=p.next()).done)break;h=v.value}s(l,h,a)}}}),this)}),this)},keyUp:function(e,t,r){d._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyUp,e,t,r)},keyPress:function(e,t,r){d._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyPress,e,t,r)}};var d=function(e){function t(e,r,n){var i;return c(this,t),(i=o(this,a(t).call(this,e,n)))._mesh_value=4*(window.devicePixelRatio||1),i._process_status=0,i._process_values={kd_tasks:[]},i.cursorDown=function(e){var r,n=i._points;if(i._identifiers[0]!==t.MOUSE_EVENT_ID)if(e.changedTouches&&n.length<i._max_points){var s=e.changedTouches,o=Array.isArray(s),a=0;for(s=o?s:s[Symbol.iterator]();;){var _;if(o){if(a>=s.length)break;_=s[a++]}else{if((a=s.next()).done)break;_=a.value}var c=_;if(-1===i._identifiers.indexOf(c.identifier)){r=c;break}}}else 0===n.length&&Math.pow(2,e.button)&i._bm&&(r=e);if(r){var u=t.CURSOR_EVENT_HANDLES.length;if(0===n.length){var f=i._registered_listener,l=f.dragStart&&f.dragStart(e,r)||!1;if(!0===l)return;u=0,t.CURSOR_EVENT_HANDLES.reduce((function(e,t){return f[t]&&(!1===l||~l.indexOf(t))?(u++,e[t]=f[t]):delete e[t],e}),i._activated_listener)}(u>1||u>0&&!activated_listener.dragStart)&&i._registPoint(e,r)}},i._move=function(e,t,r){var n=i._activated_listener,s=i._points[r];if(n.dragMove){var o=[t.pageX-s.mx,t.pageY-s.my];n.dragMove(e,o)?(s.mx=t.pageX-o[0],s.my=t.pageY-o[1]):(s.mx=t.pageX,s.my=t.pageY)}n.click&&Math.abs(t.pageX-s.dx)+Math.abs(t.pageY-s.dy)>i._mesh_value&&(n.click=!1)},i._move2=function(e,r,n){var s=t.STATES,o=i._activated_listener,a=i._process_values,_=i._points,c=_[n],u=_[1===n?0:1],f=r.pageX-c.mx,l=r.pageY-c.my;if(o.dragMove2){var p=[f/2,l/2];o.dragMove2(e,p)&&(f-=2*p[0],l-=2*p[1])}c.mx=c.mx+f,c.my=c.my+l;var d=(c.mx+u.mx)/2,y=(c.my+u.my)/2;if(o.pinch){var v=Math.sqrt(Math.pow(c.mx-u.mx,2)+Math.pow(c.my-u.my,2));i._process_status&s.IS_PINCH?o.pinch(e,-(a.sd-(a.sd=v))):Math.abs(v-a.sd)>i._mesh_value&&(i._process_status|=s.IS_PINCH,o.pinch(e,-(a.sd-(a.sd=v)),[d,y]))}if(o.rotate){var h=0===n?1:n,E=_[0].mx-_[h].mx,O=_[0].my-_[h].my,g=Math.atan2(O,E);g*a.ra<=0&&(a.ra=-a.ra),i._process_status&s.IS_ROTATE?(o.rotate(e,g-a.ra),a.ra=g):Math.abs(g-a.ra)>.01*Math.PI&&(i._process_status|=s.IS_ROTATE,o.rotate(e,g-a.ra,[d,y]),a.ra=g)}},i.cursorMove=function(e){i.eventDispenser(e,i._points.length<2?i._move:i._move2)},i._leave=function(e,r,n){var o;i._identifiers.splice(n,1),i._points.splice(n,1);var a=t.STATES,_=i._identifiers.length,c=i._activated_listener;switch(!0){case _<1:i.setListener((s(o={},a.MOUSE_DOWN,!0),s(o,a.MOUSE_MOVE,!1),s(o,a.MOUSE_UP,!1),s(o,a.TOUCH_MOVE,!1),s(o,a.TOUCH_END,!1),s(o,a.TOUCH_CANCEL,!1),o)),i._process_status=0,c.dragEnd&&c.dragEnd(e,r),c.click&&c.click(e,r);break;case _<i._max_points:if(i._process_status=a.IS_DRAG,e.targetTouches&&e.targetTouches.length>=i._max_points){var u=e.targetTouches,f=Array.isArray(u),l=0;for(u=f?u:u[Symbol.iterator]();;){var p;if(f){if(l>=u.length)break;p=u[l++]}else{if((l=u.next()).done)break;p=l.value}var d=p;if(-1===i._identifiers.indexOf(d.identifier)){i._registPoint(e,d);break}}}}},i.cursorUp=function(e){i.eventDispenser(e,i._leave)},i.keyDown=function(e){var r=i._process_values.kd_tasks;function n(t){if(t){for(var n=t._listeners?t._listeners.length:0,i=0;i<n;i++)if(!0===t._listeners[i](e,t._path))return!0;t._reference>n&&-1===r.indexOf(t)&&r.push(t)}}var s=t._PRIVATE_METHODS.get_keys(e);if(!r.some((function(e){return s.some((function(t){return n(e[t])}))}))){var o=s,a=Array.isArray(o),_=0;for(o=a?o:o[Symbol.iterator]();;){var c;if(a){if(_>=o.length)break;c=o[_++]}else{if((_=o.next()).done)break;c=_.value}var u=c;if(n(i._registered_listener.keyDown[u]))break}}},i.keyUp=function(e){for(var r=t._PRIVATE_METHODS.get_keys(e),n=i._process_values.kd_tasks,s=function(e){r.some((function(t){return-1!==n[e]._parts.indexOf(t)}))&&n.splice(e--,1),o=e},o=0;o<n.length;o++)s(o);var a=i._registered_listener.keyUp,_=r,c=Array.isArray(_),u=0;for(_=c?_:_[Symbol.iterator]();;){var f;if(c){if(u>=_.length)break;f=_[u++]}else{if((u=_.next()).done)break;f=u.value}var l=f;a[l]&&a[l].some((function(t){return t(e)}))}},i.keyPress=function(e){var r=t._PRIVATE_METHODS.get_keys(e),n=i._registered_listener.keyPress,s=r,o=Array.isArray(s),a=0;for(s=o?s:s[Symbol.iterator]();;){var _;if(o){if(a>=s.length)break;_=s[a++]}else{if((a=s.next()).done)break;_=a.value}var c=_;n[c]&&n[c].some((function(t){return t(e)}))}},i.registListener(r),i}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),f(t,[{key:\"on\",value:function(e,t){return this.updateListener(s({},e,t))}},{key:\"off\",value:function(e,t){return this.updateListener(s({},e,t),!0)}},{key:\"activate\",value:function(){this.updateListener()}},{key:\"disable\",value:function(){var e=this;this.setListener(Object.keys(this._listener_status).reduce((function(t,r){return e._listener_status[r]&&(t[r]=!1),t}),{}))}},{key:\"updateListener\",value:function(e,r){var n,i=this._registered_listener,o=t.STATES;if(e)for(var a in e)for(var _ in t.PATTERN_MAP)t.PATTERN_MAP[_].test(a)&&(t._LISTENER_PREPROCESSOR[_]?e[a]&&t._LISTENER_PREPROCESSOR[_].call(this,a,e[a],r):i[_]=r?null:e[a]);this._max_points=i.pinch||i.rotate||i.dragMove2?2:1;var c=!!(i.dragStart||i.dragMove||i.dragMove2||i.dragEnd||i.click||i.pinch||i.rotate);return this.setListener((s(n={},o.MOUSE_DOWN,c),s(n,o.TOUCH_START,c),s(n,o.KEY_DOWN,i.keyDown._reference>0),s(n,o.KEY_UP,i.keyDown._reference>0||i.keyUp._reference>0),s(n,o.KEY_PRESS,i.keyPress._reference>0),n)),this}},{key:\"_registPoint\",value:function(e,r){var n,i=t.STATES,o=this._points,a=this._activated_listener;switch(o.push({dx:r.pageX,dy:r.pageY,mx:r.pageX,my:r.pageY}),this._identifiers.push(isNaN(r.identifier)?t.MOUSE_EVENT_ID:r.identifier),o.length){case 1:this._process_status=i.IS_DRAG;var _=this._is_mouse_event;this.setListener((s(n={},i.MOUSE_DOWN,_),s(n,i.MOUSE_MOVE,_),s(n,i.MOUSE_UP,_),s(n,i.TOUCH_MOVE,!_),s(n,i.TOUCH_END,!_),s(n,i.TOUCH_CANCEL,!_),n));break;case 2:this._process_values.sd=Math.sqrt(Math.pow(o[0].mx-o[1].mx,2)+Math.pow(o[0].my-o[1].my,2)),this._process_values.ra=Math.atan2(o[0].my-o[1].my,o[0].mx-o[1].mx),a.click&&(a.click=!1)}}},{key:\"registListener\",value:function(e){this.updateListener(e)}},{key:\"removeListener\",value:function(e){e&&this.updateListener(e,!0)}}]),t}(p);try{window.InputListener=d}catch(e){}e.exports=d}])}));\n//# sourceMappingURL=input_listener.js.map","//import MutexBox from '../dist/js/mutex_box.js'//'./mutex_box.ts'\r\nimport { get_models, get_option } from './test_data.js';\r\n\r\nconst MutexBox =require('./mutex_box.ts');//'../dist/js/mutex_box.js'\r\nlet vessel = document.createElement(\"ul\");\r\nvessel.className = \"mutex-box\";\r\ndocument.body.appendChild(vessel);\r\n\r\nlet zIndex = 0;\r\nlet option = get_option();\r\nlet models = Array.prototype.concat.apply([], new Array(10).fill(0).map(get_models));\r\nbind_element(models);\r\n\r\nlet mutexBox = new MutexBox(vessel, models, option);\r\nbtn_col_inc.onclick = () => {\r\n    mutexBox.resize(++option.ncols);\r\n};\r\nbtn_col_dec.onclick = () => {\r\n    mutexBox.resize(--option.ncols);\r\n}\r\nbtn_trim.onclick = () => {\r\n    mutexBox.trim();\r\n};\r\nbtn_add.onclick = () => {\r\n    mutexBox.add(\r\n        bind_element(\r\n            get_models().map(\r\n                model => {\r\n                    //指定有明确的 col row 会将现有元素排挤出去强制占用该空间\r\n                    model.col = undefined;\r\n                    return model;\r\n                }\r\n            )\r\n        )\r\n    );\r\n};\r\nconsole.log(mutexBox);\r\n\r\nfunction bind_element(models) {\r\n    for (let model of models) {\r\n        let element = model.element ? model.element() : (() => {\r\n            let li = document.createElement(\"li\");\r\n            li.className = \"mb-item\";\r\n            model.innerHTML && (li.innerHTML = model.innerHTML);\r\n            return li;\r\n        })();\r\n        if (model.style) {\r\n            for (const key in model.style) {\r\n                element.style[key] = model.style[key];\r\n            }\r\n        }\r\n        vessel.appendChild(element);\r\n        let { left, top, width, height, dragging } = model;\r\n        Object.defineProperties(model, {\r\n            left: {\r\n                get() {\r\n                    return left;\r\n                },\r\n                set(val) {\r\n                    left = val;\r\n                    element.style.left = left + \"px\";\r\n                }\r\n            },\r\n            top: {\r\n                get() {\r\n                    return top;\r\n                },\r\n                set(val) {\r\n                    top = val;\r\n                    element.style.top = top + \"px\";\r\n                }\r\n            },\r\n            width: {\r\n                get() {\r\n                    return width;\r\n                },\r\n                set(val) {\r\n                    width = val;\r\n                    element.style.width = width + \"px\";\r\n                }\r\n            },\r\n            height: {\r\n                get() {\r\n                    return height;\r\n                },\r\n                set(val) {\r\n                    height = val;\r\n                    element.style.height = height + \"px\";\r\n                }\r\n            },\r\n            dragging: {\r\n                get() {\r\n                    return dragging;\r\n                },\r\n                set(val) {\r\n                    dragging = val;\r\n                    element.style.zIndex = ++zIndex;\r\n                    element.className = dragging ? \"mb-item dragging\" : \"mb-item\";\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return models;\r\n\r\n}"],"sourceRoot":""}