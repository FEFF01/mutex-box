{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./js/mutex_model.ts","webpack:///./js/mutex_box.ts","webpack:///./node_modules/input-listener/dist/js/input_listener.js"],"names":["root","factory","exports","module","define","amd","a","i","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","FLAGS","models","options","model_map","Array","model_list","ncols","reduce","model","Math","max","col","colspan","dirty_data","_fill","MutexModel","USE_CHECK","FILL_EACHMODEL","append","setNCols","left_expand","splice","length","nincs","alloc","fill","clear","index","indexOf","count","undefined","remove","move","v2","flags","USE_OFFSET","getModel","row","format","rect","round","min","trim","height","ceil","changed_models","idx","nstep","_pathTest","push","nrows","max_offset","optimal_col","test_model","rowspan","max_col","offset","trimmed_rect","crossed_models","crossed_rect","cover","slice","calcWrap","_compress","sort","b","cascading_trimmed_rect","crossed_model","indenting_models","models_nrow","capture_models","capture_features","capture_nindents","new_capture_models","new_capture_features","new_capture_nindents","nindents","col_end","feature","loss_nindent","item","model_nindent","apply","Number","next_col","row_end","under_model","cm_idx","nindent","im_idx","map","USE_EACHOFFSET","concat","mask","result","right","wrap","calcOffset","origin_rect","target_rect","arg","next_model","isFinite","isNaN","list_index","pop","wrap_rect","ec","er","oc","or","ic","abs","ir","r_end","c_end","use_bw","vf","hf","f","trimmed_offset","lw","rw","bw","tw","sorted_directions","j","lastIndexOf","InputListener","vessel","boxes","inputListener","_client_width","resize","direction","client_width","clientWidth","_update","dragStart","e","getBoundingClientRect","_left","clientX","left","_top","clientY","top","target_box","_get_box","onPick","preventDefault","dragging","dragMove","_stay_timeout","window","clearTimeout","onMove","break","_e","_t","setTimeout","put","dragEnd","is_release","box","cell_size","cellSize","space","listener","onDrop","onStay","sqrt","activate","disable","capture","MutexBox","add","update","new_values","_width","_height","bottom","width","px","py","_hit","distance","Function","res","_x","space_left","_y","space_top","_w","space_right","_h","space_bottom","zx","zy","zd","radian","atan2","r_h","atan","_h_rv","PI","_h_pi","cos","capture_top","capture_right","capture_bottom","capture_left","receive","addPoint","default","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","iterator","constructor","configurable","writable","ReferenceError","Reflect","construct","sham","Proxy","Date","toString","setPrototypeOf","getPrototypeOf","__proto__","_","u","TypeError","rotate","pinch","dragMove2","click","_activated_listener","_registered_listener","keyDown","_parts","_reference","keyUp","keyPress","mouse_mask","target","pointX","pointY","_listener_status","_points","_identifiers","forEach","_listener_options","h","EVENT_CONFIG","addEventListener","removeEventListener","MOUSE_EVENT_ID","pow","button","changedTouches","identifier","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","KEY_DOWN","KEY_UP","KEY_PRESS","CURSOR_EVENT_HANDLES","STATES","IS_DRAG","IS_ROTATE","IS_PINCH","PATTERN_MAP","arguments","getOwnPropertyDescriptors","defineProperties","_PRIVATE_METHODS","update_key_listener","match_keys","match","toLocaleLowerCase","isArray","next","done","get_keys","code","_LISTENER_PREPROCESSOR","split","_listeners","_parent","_key","_path","join","v","y","_mesh_value","_process_status","_process_values","kd_tasks","cursorDown","_max_points","_move","mx","my","dx","dy","_move2","sd","E","O","S","ra","cursorMove","eventDispenser","_leave","setListener","targetTouches","registPoint","cursorUp","some","registListener","updateListener","test","_is_mouse_event"],"mappings":"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","file":"js/mutex_box.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","\r\nimport { Model, Rect, Options } from './interfaces';\r\n\r\nenum FLAGS {\r\n    USE_CHECK = 0x01,\r\n    FILL_EACHMODEL = 0x10,\r\n    USE_OFFSET = 0x100,\r\n    USE_EACHOFFSET = 0x1000,\r\n};\r\nclass MutexModel {\r\n    protected model_map: Array<Model | undefined> = new Array();\r\n    protected model_list: Array<Model> = new Array();\r\n    static FLAGS = FLAGS;\r\n    /**\r\n     * 与使用场景无关的js内存模型\r\n     * @param models \r\n     * @param options \r\n     */\r\n    constructor(\r\n        models: Array<Model> = [],\r\n        public options: Options = {}\r\n    ) {\r\n        if (!(this.options.ncols > 0)) {\r\n            this.options.ncols = models.reduce(\r\n                (ncols, model) => Math.max(ncols, (model.col || 0) + (model.colspan || 1))\r\n                , 1\r\n            );\r\n        }\r\n        let dirty_data = this._fill(models, MutexModel.FLAGS.USE_CHECK | MutexModel.FLAGS.FILL_EACHMODEL);\r\n        this.append(dirty_data);\r\n    }\r\n    get ncols(): number {\r\n        return this.options.ncols;\r\n    }\r\n    set ncols(ncols: number) {\r\n        this.setNCols(ncols);\r\n    }\r\n    /**\r\n     * 设置模型列数\r\n     * @param ncols 新的列数\r\n     * @param left_expand 如果为true表示为左扩展，也可以（-1 左 ，1右）\r\n     */\r\n    setNCols(ncols: number, left_expand?: boolean | number) {\r\n        if (ncols !== this.options.ncols) {\r\n            this.model_map.splice(0, this.model_map.length);\r\n            let model_list = this.model_list.splice(0, this.model_list.length);\r\n            if (left_expand && left_expand !== 1) {\r\n                let nincs = ncols - this.options.ncols;\r\n                for (const model of model_list) {\r\n                    model.col += nincs;\r\n                }\r\n            }\r\n            this.options.ncols = ncols;\r\n            for (const model of model_list) {\r\n                if (model.colspan > ncols) {\r\n                    model.colspan = ncols;\r\n                }\r\n                if (model.colspan + model.col > ncols) {\r\n                    model.col = ncols - model.colspan;\r\n                }\r\n            }\r\n            let dirty_data = this._fill(model_list, MutexModel.FLAGS.USE_CHECK | MutexModel.FLAGS.FILL_EACHMODEL);\r\n\r\n            for (const model of dirty_data) {\r\n                this.alloc(model as Rect);\r\n                this.fill(model);\r\n            }\r\n            /*\r\n            this.append(dirty_data);*/\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 填充模型\r\n     * @param models \r\n     */\r\n    fill(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        this._fill(models, MutexModel.FLAGS.FILL_EACHMODEL);\r\n    }\r\n    /**\r\n     * 清除某个模型\r\n     * @param model \r\n     */\r\n    clear(model: Model) {\r\n        let index = this.model_list.indexOf(model), count = 0;\r\n        ~index && (this.model_list.splice(index, 1));\r\n        while (~(index = this.model_map.indexOf(model))) {\r\n            count++;\r\n            this.model_map[index] = undefined;\r\n        }\r\n        return count;\r\n    }\r\n    /**\r\n     * 移除模型\r\n     * @param models \r\n     */\r\n    remove(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        this._fill(models);\r\n    }\r\n    /**\r\n     * 移动某个或某组模型\r\n     * @param models \r\n     * @param v2 \r\n     * @param flags \r\n     */\r\n    move(models: Array<Model> | Model, v2: [number, number] | Array<[number, number]>, flags: number = 0) {\r\n        models instanceof Array || (models = [models]);\r\n        this.remove(models);\r\n        return this._fill(models, flags | MutexModel.FLAGS.FILL_EACHMODEL | MutexModel.FLAGS.USE_OFFSET, v2);\r\n    }\r\n    /**\r\n     * 指定 col row 捕获在这位于上方的模型\r\n     * @param col \r\n     * @param row \r\n     */\r\n    getModel(col: number, row: number): Model | undefined {\r\n        if (col >= 0 && row >= 0 && col < this.ncols) {\r\n            return this.model_map[col + row * this.ncols];\r\n        }\r\n    }\r\n    /**\r\n     * 规整化合适的位置\r\n     * @param rect \r\n     * @param col \r\n     * @param row \r\n     */\r\n    format(rect: Rect, col = rect.col, row = rect.row): Rect {\r\n        rect.col = Math.round(Math.max(Math.min(col, this.ncols - rect.colspan), 0));\r\n        rect.row = Math.round(Math.max(row, 0));\r\n        return rect;\r\n    }\r\n    /**\r\n     * 纵向剪裁掉模型空白区域（现在只有纵向）\r\n     */\r\n    trim(): Array<Model> {\r\n        let height = Math.ceil(this.model_map.length / this.ncols);\r\n        let changed_models = [];\r\n        for (let row = 1; row < height; row++) {\r\n            for (let col = 0; col < this.ncols; col++) {\r\n                let idx = row * this.ncols + col;\r\n                let model = this.model_map[idx];\r\n                if (model && model.row === row) {\r\n                    let nstep = this._pathTest([model], [0, -row - 1], model);\r\n                    if (nstep > 0) {\r\n                        changed_models.push(model);\r\n                        this.move([model], [0, -nstep]);\r\n                    }\r\n                    col += model.colspan - 1;\r\n                }\r\n            }\r\n        }\r\n\r\n        return changed_models;\r\n    }\r\n    /**\r\n     * 自动寻找合适的地方加入模型\r\n     * @param models \r\n     */\r\n    append(models: Array<Model> | Model) {\r\n        models instanceof Array || (models = [models]);\r\n        for (const model of models) {\r\n            model.colspan > this.ncols && (model.colspan = this.ncols);\r\n            let nrows = Math.ceil(this.model_map.length / this.ncols);\r\n            let max_offset = 0, optimal_col = 0;\r\n            let test_model = { col: 0, row: nrows, colspan: model.colspan, rowspan: model.rowspan };\r\n            for (let col = 0, max_col = this.ncols - model.colspan; col <= max_col; col++) {\r\n                test_model.col = col;\r\n                let offset = this._pathTest([test_model], [0, -nrows - 1], test_model);\r\n                if (max_offset < offset) {\r\n                    max_offset = offset as number;\r\n                    optimal_col = col;\r\n                }\r\n            }\r\n            model.col = optimal_col;\r\n            model.row = nrows - max_offset;\r\n            this._fill([model], MutexModel.FLAGS.FILL_EACHMODEL);\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 在指定位置开辟出指定大小的空间\r\n     * @param rect \r\n     * @param trimmed_rect \r\n     * @param crossed_models \r\n     * @param crossed_rect \r\n     */\r\n    alloc(\r\n        rect: Rect,\r\n        trimmed_rect: Rect = this.format(\r\n            { col: rect.col, row: rect.row, colspan: rect.colspan, rowspan: rect.rowspan }\r\n        ),\r\n        crossed_models: Array<Model> = this.cover(trimmed_rect),\r\n        crossed_rect?: Rect\r\n    ): Array<Model> {\r\n        let changed_models = crossed_models.slice();\r\n        if (crossed_models.length === 0) {\r\n            return changed_models;\r\n        }\r\n        crossed_rect || (crossed_rect = this.calcWrap(crossed_models));\r\n        if (\r\n            (\r\n                crossed_rect.colspan + crossed_rect.rowspan >\r\n                (trimmed_rect.colspan + trimmed_rect.rowspan) * 1.6\r\n            ) ||\r\n            !this._compress(trimmed_rect, crossed_models, crossed_rect, rect)\r\n        ) {\r\n            crossed_models.sort((a, b) => a.row - b.row);\r\n            let cascading_trimmed_rect = { ...trimmed_rect };\r\n            for (let i = 0; i < crossed_models.length; i++) {\r\n                let crossed_model = crossed_models[i];\r\n                if (\r\n                    this._compress(\r\n                        cascading_trimmed_rect,\r\n                        [crossed_model],\r\n                        crossed_model as Rect,\r\n                        undefined,\r\n                        false\r\n                    )) {\r\n                    crossed_models.splice(i--, 1);\r\n                } else {\r\n                    if (cascading_trimmed_rect.col > crossed_model.col) {\r\n                        cascading_trimmed_rect.colspan +=\r\n                            cascading_trimmed_rect.col - crossed_model.col;\r\n                        cascading_trimmed_rect.col = crossed_model.col;\r\n                    }\r\n                    if (\r\n                        cascading_trimmed_rect.col + cascading_trimmed_rect.colspan <\r\n                        crossed_model.col + crossed_model.colspan\r\n                    ) {\r\n                        cascading_trimmed_rect.colspan =\r\n                            crossed_model.col + crossed_model.colspan - cascading_trimmed_rect.col;\r\n                    }\r\n                }\r\n            }\r\n            if (crossed_models.length === 0) {\r\n                return changed_models;\r\n            }\r\n\r\n            let indenting_models: Model[] = [];\r\n            let models_nrow: number[] = [];\r\n\r\n            crossed_rect = this.calcWrap(crossed_models);\r\n            let colspan = trimmed_rect.colspan -\r\n                Math.max(crossed_rect.col - trimmed_rect.col, 0) -\r\n                Math.max(\r\n                    trimmed_rect.col + trimmed_rect.colspan -\r\n                    crossed_rect.colspan - crossed_rect.col\r\n                    , 0\r\n                );\r\n\r\n            let capture_models: Model[] = [\r\n                {\r\n                    col: Math.max(trimmed_rect.col, crossed_rect.col),\r\n                    row: trimmed_rect.row,\r\n                    colspan,\r\n                    rowspan: 0\r\n                }\r\n            ];\r\n            let capture_features: {\r\n                [key: number]: Array<{ row: number, rowspan: number }>\r\n            } = {};\r\n            let capture_nindents: Array<number[] | number> = [new Array(colspan).fill(trimmed_rect.rowspan)];\r\n\r\n\r\n            while (capture_models.length) {\r\n                let new_capture_models: Model[] = [];\r\n                let new_capture_features: {\r\n                    [key: number]: Array<{ row: number, rowspan: number }>\r\n                } = {};\r\n                let new_capture_nindents: Array<number[] | number> = [];\r\n                for (const key in capture_features) {\r\n                    capture_features[key].sort((a, b) => a.row - b.row);\r\n                }\r\n                for (let i = 0; i < capture_models.length; i++) {\r\n                    let model = capture_models[i];\r\n                    let nindents = capture_nindents[i] as Array<number>;\r\n                    for (let col = model.col, col_end = col + model.colspan; col < col_end; col++) {\r\n                        let feature = capture_features[col];\r\n                        if (feature) {\r\n                            let loss_nindent = 0;\r\n                            for (let index = 0; index < feature.length - 1; index++) {\r\n                                let item = feature[index];\r\n                                if (item.row < model.row) {\r\n                                    loss_nindent += feature[index + 1].row - (item.row + item.rowspan);\r\n                                } else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            nindents[col - model.col] -= loss_nindent;\r\n                        }\r\n                    }\r\n                    let model_nindent = Math.max.apply(Number, nindents);\r\n                    if (model_nindent > 0) {\r\n                        capture_nindents[i] = model_nindent;\r\n                        let index = indenting_models.indexOf(model);\r\n                        if (index === -1) {\r\n                            index = indenting_models.length;\r\n                            indenting_models.push(model);\r\n                            models_nrow.push(model_nindent);\r\n                        } else {\r\n                            if (models_nrow[index] >= model_nindent) {\r\n                                //console.log(models_nrow[index] , model_nindent);\r\n                                continue;\r\n                            } else {\r\n                                models_nrow[index] = model_nindent;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        capture_models.splice(i, 1);\r\n                        capture_nindents.splice(i, 1);\r\n                        i--;\r\n                    }\r\n                }\r\n                for (let index = 0; index < capture_models.length; index++) {\r\n                    let model = capture_models[index];\r\n                    let model_nindent = capture_nindents[index] as number;\r\n                    next_col:\r\n                    for (let col = model.col, col_end = col + model.colspan; col < col_end; col++) {\r\n                        for (\r\n                            let row = model.row + model.rowspan, row_end = row + model_nindent;\r\n                            row < row_end;\r\n                            row++\r\n                        ) {\r\n                            let under_model = this.model_map[col + row * this.ncols];\r\n                            if (under_model) {\r\n                                let cm_idx = new_capture_models.indexOf(under_model);\r\n                                let nindents: number[];\r\n                                let nindent = row_end - row + Math.max(model.row - under_model.row, 0);\r\n                                if (cm_idx === -1) {\r\n                                    let im_idx = indenting_models.indexOf(under_model);\r\n                                    if (im_idx >= 0 && models_nrow[im_idx] >= nindent) {\r\n                                        continue next_col;\r\n                                    }\r\n                                    new_capture_models.push(under_model);\r\n                                    new_capture_nindents.push(nindents = new Array(under_model.colspan).fill(0));\r\n                                    let feature = new_capture_features[col] || (new_capture_features[col] = []);\r\n                                    feature.push({\r\n                                        row: under_model.row,\r\n                                        rowspan: under_model.rowspan\r\n                                    });\r\n                                } else {\r\n                                    nindents = new_capture_nindents[cm_idx] as number[];\r\n                                }\r\n                                nindents[col - under_model.col] = Math.max(nindents[col - under_model.col], nindent);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                capture_models = new_capture_models;\r\n                capture_features = new_capture_features;\r\n                capture_nindents = new_capture_nindents;\r\n            }\r\n\r\n\r\n            indenting_models.splice(0, 1);\r\n            models_nrow.splice(0, 1);\r\n\r\n            this.move(indenting_models, models_nrow.map((row): [number, number] => [0, row]), MutexModel.FLAGS.USE_EACHOFFSET);\r\n            changed_models = changed_models.concat(indenting_models);\r\n        }\r\n        return changed_models;\r\n    }\r\n    /**\r\n     * 获得指定区域所包含的全部模型\r\n     * @param mask \r\n     */\r\n    cover(mask: Rect): Array<Model> {\r\n        let result = [];\r\n        let col = mask.col, row = mask.row;\r\n        for (let r = 0; r < mask.rowspan; r++) {\r\n            for (let c = 0; c < mask.colspan; c++) {\r\n                let model = this.model_map[(c + col) + (r + row) * this.ncols];\r\n                if (model !== undefined) {\r\n                    ~result.indexOf(model) || result.push(model);\r\n                    let right = model.colspan + model.col - 1;\r\n                    c + col < right && (c = right - col);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * 计算能包含所有模型的最小矩形区域\r\n     * @param models \r\n     */\r\n    calcWrap(models: Array<Model>): Rect {\r\n        let wrap = {\r\n            col: models[0].col,\r\n            row: models[0].row,\r\n            colspan: models[0].colspan,\r\n            rowspan: models[0].rowspan\r\n        };\r\n        for (let i = 1; i < models.length; i++) {\r\n            let model = models[i];\r\n            wrap.col > model.col && (wrap.colspan += wrap.col - model.col, wrap.col = model.col);\r\n            wrap.row > model.row && (wrap.rowspan += wrap.row - model.row, wrap.row = model.row);\r\n            wrap.colspan + wrap.col < model.col + model.colspan &&\r\n                (wrap.colspan += model.col + model.colspan - wrap.col - wrap.colspan);\r\n            wrap.rowspan + wrap.row < model.row + model.rowspan &&\r\n                (wrap.rowspan += model.row + model.rowspan - wrap.row - wrap.rowspan);\r\n        }\r\n        return wrap;\r\n    }\r\n    /**\r\n     * 计算两区域的各向偏移\r\n     * @param flee_rect \r\n     * @param target_rect \r\n     */\r\n    calcOffset(origin_rect: Rect, target_rect: Rect) {\r\n        return {\r\n            l: origin_rect.col - (target_rect.col + target_rect.colspan),\r\n            r: origin_rect.col + origin_rect.colspan - target_rect.col,\r\n            t: origin_rect.row - (target_rect.row + target_rect.rowspan),\r\n            b: origin_rect.row + origin_rect.rowspan - target_rect.row,\r\n        }\r\n    }\r\n    private _fill(models: Model[], flags: number | undefined = 0, arg?: any): Array<Model> | undefined {\r\n        const FLAGS = MutexModel.FLAGS;\r\n        let dirty_data: Array<Model> | undefined = flags & FLAGS.USE_CHECK ? [] : undefined;\r\n        let model_map = this.model_map;\r\n        let model_list = this.model_list;\r\n        let ncols = this.ncols;\r\n        next_model:\r\n        for (let index = 0; index < models.length; index++) {\r\n            let model = models[index];\r\n\r\n\r\n            if (flags & FLAGS.USE_CHECK) {\r\n                isFinite(model.colspan) || (model.colspan = 1);\r\n                isFinite(model.rowspan) || (model.rowspan = 1);\r\n                if (isNaN(model.col + model.row) || model.col < 0 || model.col + model.colspan > ncols) {\r\n                    dirty_data.push(model);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let list_index = model_list.indexOf(model);\r\n            if (flags & FLAGS.FILL_EACHMODEL) {\r\n                if (list_index === -1) {\r\n                    model_list.push(model);\r\n                } else {\r\n                    continue;\r\n                }\r\n            } else {\r\n                if (list_index >= 0) {\r\n                    model_list.splice(list_index, 1);\r\n                }\r\n            }\r\n\r\n            if (flags & FLAGS.USE_EACHOFFSET) {\r\n                model.col += arg[index][0];\r\n                model.row += arg[index][1];\r\n            } else if (flags & FLAGS.USE_OFFSET) {\r\n                model.col += arg[0];\r\n                model.row += arg[1];\r\n            }\r\n            let { col, row, colspan, rowspan } = model;\r\n            //row + rowspan > this.nrows && (this.nrows = row + rowspan);\r\n            for (let r = 0; r < rowspan; r++) {\r\n                for (let c = 0; c < colspan; c++) {\r\n                    let idx = (c + col) + (r + row) * ncols;\r\n                    if (!(flags & FLAGS.USE_CHECK) || model_map[idx] === undefined) {\r\n                        model_map[idx] = flags & FLAGS.FILL_EACHMODEL ? model : arg;\r\n                    } else {\r\n                        do {\r\n                            while (c--) {\r\n                                model_map[(c + col) + (r + row) * ncols] = undefined;\r\n                            }\r\n                            c = colspan;\r\n                        } while (r--)\r\n                        flags & FLAGS.FILL_EACHMODEL && (model_list.pop());\r\n                        dirty_data.push(model);\r\n                        continue next_model;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return dirty_data;\r\n    }\r\n    private _pathTest(models: Model[], v2: [number, number], wrap_rect: Model = this.calcWrap(models)): number | boolean {\r\n        let ec = v2[0] | 0, er = v2[1] | 0, oc = 0, or = 0, nstep = 0;\r\n        let ic = ec && ec / Math.abs(ec), ir = er && er / Math.abs(er);\r\n        while (oc !== ec || or !== er) {\r\n            oc !== ec ? (oc = oc + ic) : (or = or + ir);\r\n            if (\r\n                wrap_rect.col + oc < 0 ||\r\n                wrap_rect.col + oc + wrap_rect.colspan > this.ncols ||\r\n                wrap_rect.row + or < 0\r\n            ) {\r\n                return nstep;\r\n            }\r\n            for (const model of models) {\r\n                for (let r = model.row, r_end = r + model.rowspan; r < r_end; r++) {\r\n                    for (let c = model.col, c_end = c + model.colspan; c < c_end; c++) {\r\n                        let idx = c + oc + (r + or) * this.ncols;\r\n                        if (this.model_map[idx] && models.indexOf(this.model_map[idx]) === -1) {\r\n                            return nstep;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            nstep += 1;\r\n        }\r\n        return true;\r\n    }\r\n    private _compress(\r\n        trimmed_rect: Rect,\r\n        crossed_models: Array<Model> = this.cover(trimmed_rect),\r\n        crossed_rect: Rect = this.calcWrap(crossed_models),\r\n        rect?: Rect,\r\n        use_bw = true\r\n    ): boolean {\r\n        let vf = crossed_rect.colspan / crossed_rect.rowspan;\r\n        let hf = trimmed_rect.rowspan / trimmed_rect.colspan;\r\n        let f = (vf + hf) / 4;\r\n        vf = f + vf / 2;\r\n        hf = f + hf / 2;\r\n        let trimmed_offset = this.calcOffset(trimmed_rect, crossed_rect);\r\n        let offset = rect ? this.calcOffset(rect, crossed_rect) : trimmed_offset;\r\n        let lw: any[] = [Math.abs(hf * offset.l), [trimmed_offset.l, 0]], rw: any[] = [Math.abs(hf * offset.r), [trimmed_offset.r, 0], lw];\r\n        lw.push(rw); rw.push(lw);\r\n        let tw: any[] = [Math.abs(vf * offset.t), [0, trimmed_offset.t]], bw: any[];\r\n        if (use_bw) {\r\n            bw = [Math.abs(vf * offset.b), [0, trimmed_offset.b]];\r\n            tw.push(bw); bw.push(tw);\r\n        }\r\n        let sorted_directions = (use_bw ? [lw, rw, tw, bw] : [lw, rw, tw]).sort((a, b) => a[0] - b[0]);\r\n        for (let i = 0; i < sorted_directions.length; i++) {\r\n            let j = sorted_directions.lastIndexOf(sorted_directions[i][2]);\r\n            if (j > i) {\r\n                sorted_directions.splice(j, 1);\r\n                sorted_directions.splice(i + 1, 0, sorted_directions[i][2]);\r\n            }\r\n            if (this._pathTest(crossed_models, sorted_directions[i][1], crossed_rect) === true) {\r\n                this.move(crossed_models, sorted_directions[i][1]);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default MutexModel;//这里糊一个根导出，让 MutexModel 可以在其他模块被定义\r\n//module.exports = MutexModel;//使用 module.exports 是为了import 和 require 都直接可用","\r\n\r\n\r\nimport { Model, Rect, layout, Box, CaptureFunction, Options } from './interfaces';\r\n\r\nimport MutexModel from './mutex_model';\r\nconst InputListener = require('input-listener');\r\n\r\n\r\nclass MutexBox extends MutexModel {\r\n    inputListener?: typeof InputListener = null;\r\n    static space: layout = { top: 0, right: 0, bottom: 0, left: 0 };\r\n    static capture: layout = { top: 0, right: 0, bottom: 0, left: 0 };\r\n    static InputListener = InputListener;\r\n    private target_box?: Box;\r\n    static MutexModel = MutexModel;\r\n    private _stay_timeout?: number;\r\n    private _client_width = 0;\r\n    /**\r\n     * @description 在指定html容器内实例化控制器\r\n     * @param vessel 容器元素（在该元素上监听各种交互，通过该元素的 clientWidth 属性确定每个box的大小）\r\n     * @param boxes box列表\r\n     * @param options 参考 interfaces.ts -> Options\r\n     */\r\n    constructor(\r\n        public vessel: HTMLElement,\r\n        boxes: Array<Box>,\r\n        options: Options = {}\r\n    ) {\r\n        super(boxes as Array<Model>, options);\r\n        this.vessel = vessel;\r\n        this.inputListener = new InputListener(vessel, {\r\n            dragStart: this.dragStart,\r\n            dragMove: this.dragMove,\r\n            dragEnd: this.dragEnd,\r\n        });\r\n        this.activate();\r\n    }\r\n    /**\r\n     * @description 取消容器事件监听\r\n     */\r\n    disable() {\r\n        this.inputListener.disable();\r\n    }\r\n    get capture() {\r\n        return this.options.capture || MutexBox.capture;\r\n    }\r\n    get space() {\r\n        return this.options.space || MutexBox.space;\r\n    }\r\n    /**\r\n     * @description 激活容器事件监听\r\n     */\r\n    activate() {\r\n        this.resize();\r\n        this.inputListener.activate();\r\n    }\r\n    /**\r\n     * @description 移除某个或一组box\r\n     * @param boxes \r\n     */\r\n    remove(boxes: Array<Box> | Box) {\r\n        super.remove(boxes);\r\n    }\r\n    /**\r\n     * @description 添加一个或一组box，对于单个box如果 \r\n     * box.col >= 0 && box.col + box.colspan <= this.ncols && box.row >= 0 成立则强制在指定位置填充该box，\r\n     * 如果不成立则自动寻找在合适的位置填充该box\r\n     * @param boxes \r\n     */\r\n    add(boxes: Array<Box> | Box) {\r\n        boxes instanceof Array || (boxes = [boxes]);\r\n        for (const box of boxes) {\r\n            if (box.col >= 0 && box.col + box.colspan <= this.ncols && box.row >= 0) {\r\n                this.alloc(box as Rect);\r\n                this.fill(box);\r\n            } else {\r\n                this.append(box);\r\n            }\r\n        }\r\n        this._update(boxes);\r\n    }\r\n    /**\r\n     * @description mutex-box不会主动判断容器元素宽度是否发生改变，当容器宽度发生改变需要立即响应时可以主动调用该方法\r\n     *  当容器内列数发生改变时可以调用该方法传入新的列数，并通知列数改变是为右扩展还是左扩展\r\n     * @param ncols 如果为列数更改，传入新的列数\r\n     * @param direction  -1表示左扩展，1表示右扩展（默认为1）\r\n     */\r\n    resize = (ncols: number = this.options.ncols, direction?: boolean | number) => {\r\n        let client_width = this.clientWidth;\r\n        if (ncols !== this.ncols || this._client_width !== client_width) {\r\n            this.setNCols(ncols, direction)\r\n            this._client_width = client_width;\r\n            this._update(this.model_list as Array<Box>);\r\n        }\r\n    }\r\n    get clientWidth() {\r\n        return isFinite(this.options.client_width) ? this.options.client_width : this.vessel.clientWidth;\r\n    }\r\n    /**\r\n     * @description 某个box col row colspan rowspan关系到排版的属性发生改变时，可以调用该方法执行更新\r\n     * @param box \r\n     * @param new_values \r\n     */\r\n    update(box?: Box, new_values?: Model) {\r\n        if (box) {\r\n            super.clear(box);\r\n            if (new_values instanceof Object) {\r\n                //Object.assign(box, new_values);\r\n                for (const key in new_values) {\r\n                    box[key] = new_values[key];\r\n                }\r\n            }\r\n            this.alloc(box as Rect);\r\n            this.fill(box);\r\n            this._update(box);\r\n        } else {\r\n            this._update(this.model_list as Array<Box>);\r\n        }\r\n    }\r\n    dragStart = (e: TouchEvent | MouseEvent, t: Touch | MouseEvent) => {\r\n        //e.preventDefault();\r\n        let rect = this.vessel.getBoundingClientRect();\r\n        let _left = t.clientX - rect.left;\r\n        let _top = t.clientY - rect.top;\r\n        //let { col, row } = \r\n        this.target_box = this._get_box(_left, _top, e, t);\r\n        if (\r\n            this.target_box &&\r\n            !(\r\n                this.options.onPick &&\r\n                this.options.onPick(e, t, this.target_box)\r\n            )\r\n        ) {\r\n            e.preventDefault();\r\n            this.target_box.dragging = true;\r\n            this.remove(this.target_box);\r\n            return;\r\n        }\r\n        return true;\r\n    }\r\n    private _e?: TouchEvent | MouseEvent;\r\n    private _t?: Touch | MouseEvent;\r\n    dragMove = (e: TouchEvent | MouseEvent, v2: [number, number], t: Touch | MouseEvent) => {\r\n        this.target_box.left += v2[0];\r\n        this.target_box.top += v2[1];\r\n        if (this._stay_timeout) {\r\n            window.clearTimeout(this._stay_timeout);\r\n            this._stay_timeout = null;\r\n        }\r\n\r\n        if (this.options.onMove && this.options.onMove(e, t, this.target_box)) {\r\n            this.inputListener.break();\r\n            this.target_box = null;\r\n            return;\r\n        }\r\n        this._e = e;\r\n        this._t = t;\r\n        this._stay_timeout = window.setTimeout(this.put, 300);\r\n    }\r\n    dragEnd = (e: TouchEvent | MouseEvent, t: Touch | MouseEvent) => {\r\n        this._stay_timeout && window.clearTimeout(this._stay_timeout);\r\n        this._e = e;\r\n        this._t = t;\r\n        this.put(true);\r\n    }\r\n    private _update(boxes: Box | Array<Box>) {\r\n        boxes instanceof Array || (boxes = [boxes]);\r\n        let cell_size = this.cellSize;\r\n        let _left, _top, _width, _height;\r\n        for (const box of boxes) {\r\n            let { left = 0, right = 0, top = 0, bottom = 0 } = box.space || this.space;\r\n            _left = cell_size * box.col + left;\r\n            _top = cell_size * box.row + top;\r\n            _width = cell_size * box.colspan - left - right;\r\n            _height = cell_size * box.rowspan - top - bottom;\r\n\r\n            _left !== box.left && (box.left = _left);\r\n            _top !== box.top && (box.top = _top);\r\n            _width !== box.width && (box.width = _width);\r\n            _height !== box.height && (box.height = _height);\r\n        }\r\n    }\r\n    get cellSize() {\r\n        return this.clientWidth / this.ncols;\r\n    }\r\n    private _get_box(px: number, py: number, e: TouchEvent | MouseEvent, t: Touch | MouseEvent): Box | undefined {\r\n        let cell_size = this.cellSize;\r\n        let box: Box | undefined = this.getModel(px / cell_size | 0, py / cell_size | 0) as (Box | undefined);\r\n\r\n        function _hit(length: number, distance: number, capture: number): boolean {\r\n            if (capture >= 0) {\r\n                return distance < length - capture;\r\n            } else {\r\n                return distance >= length + capture && distance < length;\r\n            }\r\n        }\r\n        if (box) {\r\n            let capture = box.capture || this.capture;\r\n            if (capture instanceof Function) {\r\n                let res = capture(e, t, box);\r\n                return res === true ? box : (res === false ? undefined : res);\r\n            } else {\r\n                let {\r\n                    top: space_top = 0,\r\n                    right: space_right = 0,\r\n                    bottom: space_bottom = 0,\r\n                    left: space_left = 0\r\n                } = box.space || this.space;\r\n                let {\r\n                    top: capture_top = 0,\r\n                    right: capture_right = 0,\r\n                    bottom: capture_bottom = 0,\r\n                    left: capture_left = 0\r\n                } = capture;\r\n                let _x = box.col * cell_size + space_left;\r\n                let _y = box.row * cell_size + space_top;\r\n                let _w = box.colspan * cell_size - space_right - space_left;\r\n                let _h = box.rowspan * cell_size - space_top - space_bottom;\r\n\r\n                let zx = px - _x - _w / 2;\r\n                let zy = py - _y - _h / 2;\r\n                let zd = Math.sqrt(zx ** 2 + zy ** 2);\r\n                let radian = Math.atan2(zy, zx);\r\n                let r_h = Math.atan(_w / _h) * 2;\r\n                let r_v = Math.PI - r_h;\r\n                let _h_rv = r_v / 2;\r\n                let _h_pi = Math.PI / 2;\r\n                switch (true) {\r\n                    case radian < -_h_rv && radian > -r_h - _h_rv://top\r\n                        return _hit(_h / 2, zd * Math.cos(_h_pi + radian), capture_top) && box;\r\n                    case Math.abs(radian) <= _h_rv://right\r\n                        return _hit(_w / 2, zd * Math.cos(radian), capture_right) && box;\r\n                    case radian > _h_rv && radian < _h_rv + r_h://bottom\r\n                        return _hit(_h / 2, Math.abs(zd * Math.cos(_h_pi + radian)), capture_bottom) && box;\r\n                    case Math.abs(radian) >= r_h + _h_rv://left\r\n                        return _hit(_w / 2, Math.abs(zd * Math.cos(radian)), capture_left) && box;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @description 当从其他mutexBox实例或其他地方有元素被拖拽到当前mutexBox容器范围之内，而且需要当前容器接收该元素，则可以调用该方法（一般用于dragMove阶段让当前mutexBox过继手势监听状态）\r\n     * @param e 如果参数e、t同时存在则为过继dragMove状态，否则为立即dragEnd\r\n     * @param t 如果参数e、t同时存在则为过继dragMove状态，否则为立即dragEnd\r\n     * @param box \r\n     */\r\n    receive(e?: TouchEvent | MouseEvent, t?: Touch | MouseEvent, box?: Box) {\r\n        if (this.target_box) {\r\n            window.clearTimeout(this._stay_timeout);\r\n            this.put(true);\r\n            this.inputListener.break();\r\n        }\r\n        this.target_box = box;\r\n        if (e && t) {\r\n            this.inputListener.addPoint(t);\r\n            this._stay_timeout = window.setTimeout(this.put, 300);\r\n        } else {\r\n            this.put(true);\r\n        }\r\n    }\r\n    move(models: Array<Box> | Box, v2: [number, number] | Array<[number, number]>, flags: number = 0) {\r\n        let dirty_data = super.move(models, v2, flags);\r\n        this._update(models);\r\n        return dirty_data;\r\n    }\r\n    put = (\r\n        is_release?: boolean,\r\n        box: Box = this.target_box,\r\n        e: TouchEvent | MouseEvent = this._e,\r\n        t: Touch | MouseEvent = this._t,\r\n    ) => {\r\n        this._stay_timeout = undefined;\r\n        let cell_size = this.cellSize;\r\n        let space = box.space || this.space;\r\n        let col = (box.left - space.left) / cell_size, row = (box.top - space.top) / cell_size;\r\n        let rect = {\r\n            col, row,\r\n            colspan: box.colspan,\r\n            rowspan: box.rowspan\r\n        }\r\n        let trimmed_rect = this.format({ ...rect });\r\n        let crossed_models = this.cover(trimmed_rect);\r\n        let listener = (is_release ? this.options.onDrop : this.options.onStay);\r\n        if (listener && listener(e, t, box, crossed_models as Array<Box>)) {\r\n            if (!is_release) {\r\n                this.inputListener.break();\r\n            }\r\n            this.target_box = null;\r\n            return;\r\n        }\r\n        if (crossed_models.length) {\r\n            let crossed_rect = this.calcWrap(crossed_models);\r\n            if (\r\n                trimmed_rect.col === crossed_rect.col &&\r\n                trimmed_rect.row === crossed_rect.row &&\r\n                box.colspan === crossed_rect.colspan &&\r\n                box.rowspan === crossed_rect.rowspan &&\r\n                (Math.abs(rect.col - crossed_rect.col) +\r\n                    Math.abs(rect.row - crossed_rect.row)) < 0.1 / Math.sqrt(cell_size / 60) &&\r\n                Math.abs(box.col - crossed_rect.col) / box.colspan +\r\n                Math.abs(box.row - crossed_rect.row) / box.rowspan > 1\r\n            ) {\r\n                this.move(\r\n                    crossed_models as Array<Box>,\r\n                    [box.col - crossed_rect.col, box.row - crossed_rect.row]\r\n                );\r\n            } else {\r\n                this.alloc(rect, trimmed_rect, crossed_models, crossed_rect);\r\n            }\r\n        }\r\n        this.format(box as Rect, col, row);\r\n        if (is_release === true) {\r\n            box.dragging = false;\r\n            this.fill(box);\r\n            this._update([box]);\r\n            this.target_box = null;\r\n        }\r\n    }\r\n}\r\n\r\ntry {\r\n    (window as any).MutexBox = MutexBox;\r\n} catch (e) {\r\n\r\n}\r\n\r\nexport { InputListener, MutexBox, MutexModel };\r\nexport default MutexBox;\r\n//module.exports = MutexBox;//使用 module.exports 是为了import 和 require 都直接可用\r\n\r\n\r\n","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return!t||\"object\"!==i(t)&&\"function\"!=typeof t?function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e):t}function a(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}var p={rotate:/^rotate$/,pinch:/^pinch$/,dragMove2:/^dragMove2$/,dragStart:/^dragStart$/,dragMove:/^dragMove$/,dragEnd:/^dragEnd$/,click:/^click$/},d=function(){function e(t,r){var n=this;u(this,e),this._activated_listener={},this._registered_listener={rotate:null,pinch:null,dragMove:null,dragStart:null,dragEnd:null,dragMove2:null,click:null,keyDown:{_parts:[],_reference:0},keyUp:{_reference:0},keyPress:{_reference:0}},this.mouse_mask=1,this.target=null,this.pointX=\"pageX\",this.pointY=\"pageY\",this._listener_status={},this._points=[],this._identifiers=[];var i=!1;this.target=t,r&&(!0===r?i=!0:(i=[\"capture\",\"passive\",\"passive\"].forEach((function(e){void 0!==r[e]&&((i||(i={}))[e]=r[e])})),[\"pointX\",\"pointY\",\"mouse_mask\"].forEach((function(e){void 0!==r[e]&&(n[e]=r[e])})))),this._listener_options=i}return l(e,[{key:\"setListener\",value:function(e){for(var t in e)if(!this._listener_status[t]!=!e[t]){var r=h.EVENT_CONFIG[t],n=r[0],i=r[1],s=r[2]||this.target;e[t]?s.addEventListener(n,this[i],this._listener_options):s.removeEventListener(n,this[i],this._listener_options),this._listener_status[t]=!!e[t]}}},{key:\"eventDispenser\",value:function(e,t){if(this._identifiers[0]===h.MOUSE_EVENT_ID)Math.pow(2,e.button)&this.mouse_mask&&t(e,e,0);else if(e.changedTouches)for(var r=0;r<e.changedTouches.length;r++){var n=this._identifiers.indexOf(e.changedTouches[r].identifier);-1!==n&&t(e,e.changedTouches[r],n)}}},{key:\"_is_mouse_event\",get:function(){return this._identifiers[0]===h.MOUSE_EVENT_ID}}]),e}();d.EVENT_CONFIG={MOUSE_DOWN:[\"mousedown\",\"cursorDown\"],MOUSE_MOVE:[\"mousemove\",\"cursorMove\",window],MOUSE_UP:[\"mouseup\",\"cursorUp\",window],TOUCH_START:[\"touchstart\",\"cursorDown\"],TOUCH_MOVE:[\"touchmove\",\"cursorMove\",window],TOUCH_END:[\"touchend\",\"cursorUp\",window],TOUCH_CANCEL:[\"touchcancel\",\"cursorUp\",window],KEY_DOWN:[\"keydown\",\"keyDown\"],KEY_UP:[\"keyup\",\"keyUp\"],KEY_PRESS:[\"keypress\",\"keyPress\"]},d.CURSOR_EVENT_HANDLES=Object.keys(p),d.STATES={IS_DRAG:1,IS_ROTATE:2,IS_PINCH:4,MOUSE_DOWN:\"MOUSE_DOWN\",MOUSE_MOVE:\"MOUSE_MOVE\",MOUSE_UP:\"MOUSE_UP\",TOUCH_START:\"TOUCH_START\",TOUCH_MOVE:\"TOUCH_MOVE\",TOUCH_END:\"TOUCH_END\",TOUCH_CANCEL:\"TOUCH_CANCEL\",KEY_DOWN:\"KEY_DOWN\",KEY_UP:\"KEY_UP\",KEY_PRESS:\"KEY_PRESS\"},d.PATTERN_MAP=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},p,{},{keyDown:/^\\S+_keyDown$/,keyUp:/^\\S+_keyUp$/,keyPress:/^\\S+_keyPress$/}),d.MOUSE_EVENT_ID=-9007199254740991,d._PRIVATE_METHODS={update_key_listener:function(e,t,r,n){h._PRIVATE_METHODS.match_keys(t,(function(t){var i=e[t];i||(i=e[t]=[]);var s=i.indexOf(r);n?s>=0&&(e._reference--,i.length>1?i.splice(s,1):delete e[t]):(e._reference++,~s||i.push(r))}))},match_keys:function(e,t){var r=e.match(/(\\w+?| )(?=$|\\||,|\\+)/g);if(r=r?r.map((function(e){return e.toLocaleLowerCase()})):[],!t)return r;var n=r,i=Array.isArray(n),s=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}if(t(o))break}},get_keys:function(e){return e.code&&e.key!==e.code?[e.key.toLocaleLowerCase(),e.code.toLocaleLowerCase()]:[e.key.toLocaleLowerCase()]}},d._LISTENER_PREPROCESSOR={keyDown:function(e,t,r){var n,i=e.slice(0,-8).split(\",\"),s=r?function(e,r,n){if(n){var i=e[r];if(i){var s=i._listeners.indexOf(t);-1!==s&&(i._listeners.splice(s,1),function e(t){var r=t._parent;--t._reference<=0&&r&&(delete r[t._key],e(r))}(i))}}}:function(e,r,i){var s=e[r];s||((s=e[r]={_parent:e,_key:r,_reference:0,_parts:e._parts.concat(r)})._path=s._parts.join(\"+\"),e._reference++),n.push(s),i&&(s._reference++,s._listeners?-1===s._listeners.indexOf(t)&&s._listeners.push(t):s._listeners=[t])};i.forEach((function(e){n=[this._registered_listener.keyDown],e.split(\"+\").forEach((function(e,t,r){var i=n,o=h._PRIVATE_METHODS.match_keys(e),a=r.length===t+1;n=[];var c=i,_=Array.isArray(c),u=0;for(c=_?c:c[Symbol.iterator]();;){var f;if(_){if(u>=c.length)break;f=c[u++]}else{if((u=c.next()).done)break;f=u.value}var l=f,p=o,d=Array.isArray(p),v=0;for(p=d?p:p[Symbol.iterator]();;){var y;if(d){if(v>=p.length)break;y=p[v++]}else{if((v=p.next()).done)break;y=v.value}s(l,y,a)}}}),this)}),this)},keyUp:function(e,t,r){h._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyUp,e,t,r)},keyPress:function(e,t,r){h._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyPress,e,t,r)}};var h=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(n,e);var t,r=(t=n,function(){var e,r=c(t);if(a()){var n=c(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return o(this,e)});function n(e,t,i){var o;return u(this,n),(o=r.call(this,e,i))._mesh_value=4,o._process_status=0,o._process_values={kd_tasks:[]},o.cursorDown=function(e){var t,r=o._points;if(o._identifiers[0]!==n.MOUSE_EVENT_ID)if(e.changedTouches&&r.length<o._max_points){var i=e.changedTouches,s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var c;if(s){if(a>=i.length)break;c=i[a++]}else{if((a=i.next()).done)break;c=a.value}var _=c;if(-1===o._identifiers.indexOf(_.identifier)){t=_;break}}}else 0===r.length&&Math.pow(2,e.button)&o.mouse_mask&&(t=e);t&&o.addPoint(t,e)},o._move=function(e,t,r){var n=o._activated_listener,i=o._points[r],s=t[o.pointX],a=t[o.pointY];if(n.dragMove){var c=[s-i.mx,a-i.my];n.dragMove(e,c,t)?(i.mx=s-c[0],i.my=a-c[1]):(i.mx=s,i.my=a)}n.click&&Math.abs(s-i.dx)+Math.abs(a-i.dy)>o._mesh_value&&(n.click=!1)},o._move2=function(e,t,r){var i=n.STATES,s=o._activated_listener,a=o._process_values,c=o._points,_=c[r],u=c[1===r?0:1],f=t[o.pointX]-_.mx,l=t[o.pointY]-_.my;if(s.dragMove2){var p=[f/2,l/2];s.dragMove2(e,p,t)&&(f-=2*p[0],l-=2*p[1])}_.mx=_.mx+f,_.my=_.my+l;var d=(_.mx+u.mx)/2,h=(_.my+u.my)/2;if(s.pinch){var v=Math.sqrt(Math.pow(_.mx-u.mx,2)+Math.pow(_.my-u.my,2));o._process_status&i.IS_PINCH?s.pinch(e,-(a.sd-(a.sd=v))):Math.abs(v-a.sd)>o._mesh_value&&(o._process_status|=i.IS_PINCH,s.pinch(e,-(a.sd-(a.sd=v)),[d,h]))}if(s.rotate){var y=0===r?1:r,E=c[0].mx-c[y].mx,O=c[0].my-c[y].my,S=Math.atan2(O,E);S*a.ra<=0&&(a.ra=-a.ra),o._process_status&i.IS_ROTATE?(s.rotate(e,S-a.ra),a.ra=S):Math.abs(S-a.ra)>.01*Math.PI&&(o._process_status|=i.IS_ROTATE,s.rotate(e,S-a.ra,[d,h]),a.ra=S)}},o.cursorMove=function(e){o.eventDispenser(e,o._points.length<2?o._move:o._move2)},o._leave=function(e,t,r){var i;o._identifiers.splice(r,1),o._points.splice(r,1);var a=n.STATES,c=o._identifiers.length,_=o._activated_listener;switch(!0){case c<1:o.setListener((s(i={},a.MOUSE_DOWN,!0),s(i,a.MOUSE_MOVE,!1),s(i,a.MOUSE_UP,!1),s(i,a.TOUCH_MOVE,!1),s(i,a.TOUCH_END,!1),s(i,a.TOUCH_CANCEL,!1),i)),o._process_status=0,e&&(_.dragEnd&&_.dragEnd(e,t),_.click&&_.click(e,t));break;case e&&c<o._max_points:if(o._process_status=a.IS_DRAG,e.targetTouches&&e.targetTouches.length>=o._max_points){var u=e.targetTouches,f=Array.isArray(u),l=0;for(u=f?u:u[Symbol.iterator]();;){var p;if(f){if(l>=u.length)break;p=u[l++]}else{if((l=u.next()).done)break;p=l.value}var d=p;if(-1===o._identifiers.indexOf(d.identifier)){o.registPoint(e,d);break}}}}},o.cursorUp=function(e){o.eventDispenser(e,o._leave)},o.keyDown=function(e){var t=o._process_values.kd_tasks;function r(r){if(r){for(var n=r._listeners?r._listeners.length:0,i=0;i<n;i++)if(!0===r._listeners[i](e,r._path))return!0;r._reference>n&&-1===t.indexOf(r)&&t.push(r)}}var i=n._PRIVATE_METHODS.get_keys(e);if(!t.some((function(e){return i.some((function(t){return r(e[t])}))}))){var s=i,a=Array.isArray(s),c=0;for(s=a?s:s[Symbol.iterator]();;){var _;if(a){if(c>=s.length)break;_=s[c++]}else{if((c=s.next()).done)break;_=c.value}var u=_;if(r(o._registered_listener.keyDown[u]))break}}},o.keyUp=function(e){for(var t=n._PRIVATE_METHODS.get_keys(e),r=o._process_values.kd_tasks,i=function(e){t.some((function(t){return-1!==r[e]._parts.indexOf(t)}))&&r.splice(e--,1),s=e},s=0;s<r.length;s++)i(s);var a=o._registered_listener.keyUp,c=t,_=Array.isArray(c),u=0;for(c=_?c:c[Symbol.iterator]();;){var f;if(_){if(u>=c.length)break;f=c[u++]}else{if((u=c.next()).done)break;f=u.value}var l=f;a[l]&&a[l].some((function(t){return t(e)}))}},o.keyPress=function(e){var t=n._PRIVATE_METHODS.get_keys(e),r=o._registered_listener.keyPress,i=t,s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var c;if(s){if(a>=i.length)break;c=i[a++]}else{if((a=i.next()).done)break;c=a.value}var _=c;r[_]&&r[_].some((function(t){return t(e)}))}},o.registListener(t),o}return l(n,[{key:\"on\",value:function(e,t){return this.updateListener(s({},e,t))}},{key:\"off\",value:function(e,t){return this.updateListener(s({},e,t),!0)}},{key:\"activate\",value:function(){this.updateListener()}},{key:\"disable\",value:function(){var e=this;this.setListener(Object.keys(this._listener_status).reduce((function(t,r){return e._listener_status[r]&&(t[r]=!1),t}),{}))}},{key:\"updateListener\",value:function(e,t){var r,i=this._registered_listener,o=n.STATES;if(e)for(var a in e)for(var c in n.PATTERN_MAP)n.PATTERN_MAP[c].test(a)&&(n._LISTENER_PREPROCESSOR[c]?e[a]&&n._LISTENER_PREPROCESSOR[c].call(this,a,e[a],t):i[c]=t?null:e[a]);this._max_points=i.pinch||i.rotate||i.dragMove2?2:1;var _=!!(i.dragStart||i.dragMove||i.dragMove2||i.dragEnd||i.click||i.pinch||i.rotate);return this.setListener((s(r={},o.MOUSE_DOWN,_),s(r,o.TOUCH_START,_),s(r,o.KEY_DOWN,i.keyDown._reference>0),s(r,o.KEY_UP,i.keyDown._reference>0||i.keyUp._reference>0),s(r,o.KEY_PRESS,i.keyPress._reference>0),r)),this}},{key:\"break\",value:function(){for(var e=this._identifiers.length;--e>=0;)this._leave(void 0,void 0,e)}},{key:\"removePoint\",value:function(e){isNaN(e)&&(e=e?this._identifiers.indexOf(e.identifier||n.MOUSE_EVENT_ID):0),this._leave(void 0,void 0,e)}},{key:\"addPoint\",value:function(e,t){var r=this._points,i=n.CURSOR_EVENT_HANDLES.length;if(0===r.length){var s=this._registered_listener,o=t&&s.dragStart&&s.dragStart(t,e)||!1;if(!0===o)return;i=0,n.CURSOR_EVENT_HANDLES.reduce((function(e,t){return s[t]&&(!1===o||~o.indexOf(t))?(i++,e[t]=s[t]):delete e[t],e}),this._activated_listener)}(i>1||i>0&&!this._activated_listener.dragStart)&&this.registPoint(t,e)}},{key:\"registPoint\",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=n.STATES,a=this._points,c=this._activated_listener,_=i[this.pointX],u=i[this.pointY];switch(a.push({dx:_,dy:u,mx:_,my:u}),this._identifiers.push(isNaN(i.identifier)?n.MOUSE_EVENT_ID:i.identifier),a.length){case 1:this._process_status=o.IS_DRAG,r=this._is_mouse_event,this.setListener((s(t={},o.MOUSE_DOWN,r),s(t,o.MOUSE_MOVE,r),s(t,o.MOUSE_UP,r),s(t,o.TOUCH_MOVE,!r),s(t,o.TOUCH_END,!r),s(t,o.TOUCH_CANCEL,!r),t));break;case 2:this._process_values.sd=Math.sqrt(Math.pow(a[0].mx-a[1].mx,2)+Math.pow(a[0].my-a[1].my,2)),this._process_values.ra=Math.atan2(a[0].my-a[1].my,a[0].mx-a[1].mx),c.click&&(c.click=!1)}}},{key:\"registListener\",value:function(e){this.updateListener(e)}},{key:\"removeListener\",value:function(e){e&&this.updateListener(e,!0)}}]),n}(d);try{window.InputListener=h}catch(e){}e.exports=h}])}));\n//# sourceMappingURL=input_listener.js.map"],"sourceRoot":""}