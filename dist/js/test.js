!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t,r){"use strict";function n(){return[{left:0,top:0,width:0,height:0,colspan:8,rowspan:3,innerHTML:"\n    可以在初始化中指定默认参数\n<code>\n{\n    //指定容器横向被分为多少格（默认值为足够初始化的最小值）\n    ncols: 16,\n    //指定默认空白区域（默认全0）\n    space: { left: 2, right: 2, top: 4, bottom: 0 }, \n    //指定默认拖拽捕获区域（默认全0，表示除了空白外的区域可拖拽）\n    capture: { top: 0, right: 0, bottom: 0, left: 0 }\n}\n</code>\n    "},{left:0,top:0,width:0,height:0,col:9,row:0,colspan:7,rowspan:3,innerHTML:'\n                <br><button style="color:white;background-color:black;">只允许从该按钮上方拖拽</button>\n<code>\n{\n    col: 9,\n    row: 0,\n    colspan: 7,\n    rowspan: 4,\n    capture: (e, t) => t.target.tagName === "BUTTON"\n}\n</code>\n    ',capture:function(e,t){return"BUTTON"===t.target.tagName}},{left:0,top:0,width:0,height:0,colspan:4,rowspan:7,innerHTML:'\n                <span style="\n                display:block;\n                width:0;height:0;\n                z-index: 1000;\n                border: 20px solid;\n                border-color: aqua blue red green;\n                "></span>\n                （类似上图的区域划分）<br>\n                只能在以下区域拖拽<br>\n                (1):容器中心点和顶边做三角形<br>\n                (2):容器右侧边和距离右侧边 10px 的平行线做四边形<br>\n                (3):容器中心点和距离底部 10px 的平行线做三角形<br>\n                (3):容器左侧边和距离左侧边 10px 的平行线做四边形<br>\n<code>\n{\n    colspan: 4,\n    rowspan: 6,\n    capture: {\n        top: 0,\n        right: -10,\n        bottom: 10,\n        left: -10\n    }\n}\n</code>\n    ',capture:{top:0,right:-10,bottom:10,left:-10}},{left:0,top:0,width:0,height:0,colspan:4,rowspan:4,style:{border:"solid black",borderWidth:"10px 20px"},innerHTML:"\n    只能从该容器边框部分拖拽\n<code>\n{\n    colspan: 4,\n    rowspan: 4,\n    capture: {\n        top: -10,\n        right: -20,\n        bottom: -10,\n        left: -20\n    }\n}\n</code>\n    ",capture:{top:-10,right:-20,bottom:-10,left:-20}},{left:0,top:0,width:0,height:0,colspan:4,rowspan:5,innerHTML:"\n                单独指定空白区域:<br>\n                (1)顶部 20px ,底部 30px 为空白<br>\n                (2)左右两侧溢出贴合 space-right space-left 值为 2 的容器\n<code>\n{\n    colspan: 4,\n    rowspan: 5,\n    space: {\n        top: 20,\n        right: -2,\n        bottom: 30,\n        left: -2\n    }\n}\n</code>\n    ",space:{top:20,right:-2,bottom:30,left:-2}},{left:0,top:0,width:0,height:0,col:8,row:0,colspan:4,rowspan:3,innerHTML:'\n                不指定 "col" "row" 或指定了非法值会自动根据现有摆放状态自动选择合适位置放置\n<code>\n{\n    col:8,\n    row:0,\n    colspan: 4,\n    rowspan: 3\n}\n</code>\n    '}]}function o(){return{ncols:Math.min(window.innerWidth/70|0,16),space:{left:2,right:2,top:4,bottom:0},capture:{top:0,right:0,bottom:0,left:0}}}r.r(t),r.d(t,"get_models",(function(){return n})),r.d(t,"get_option",(function(){return o}))},function(e,t,r){"use strict";var n,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.USE_CHECK=1]="USE_CHECK",e[e.FILL_EACHMODEL=16]="FILL_EACHMODEL",e[e.USE_OFFSET=256]="USE_OFFSET",e[e.USE_EACHOFFSET=4096]="USE_EACHOFFSET"}(n||(n={}));var i=function(){function e(e,t){void 0===t&&(t=e.reduce((function(e,t){return Math.max(e,(t.col||0)+(t.colspan||1))}),1)),this.model_map=new Array,this.model_list=new Array,this._ncols=null,this.model_list=this.model_list.concat(e),this.ncols=t}return Object.defineProperty(e.prototype,"ncols",{get:function(){return this._ncols},set:function(t){if(t!==this._ncols){this._ncols=t,this.model_map.splice(0,this.model_map.length);var r=this.model_list.splice(0,this.model_list.length),n=this._fill(r,e.STATES.USE_CHECK|e.STATES.FILL_EACHMODEL);this.append(n)}},enumerable:!0,configurable:!0}),e.prototype.fill=function(t){t instanceof Array||(t=[t]),this._fill(t,e.STATES.FILL_EACHMODEL)},e.prototype.clear=function(e){var t=this.model_list.indexOf(e),r=0;for(~t||this.model_list.splice(t,1);~(t=this.model_map.indexOf(e));)r++,this.model_map[t]=void 0;return r},e.prototype.remove=function(e){e instanceof Array||(e=[e]),this._fill(e)},e.prototype.move=function(t,r,n){void 0===n&&(n=0),t instanceof Array||(t=[t]),this.remove(t),this._fill(t,n|e.STATES.FILL_EACHMODEL|e.STATES.USE_OFFSET,r)},e.prototype.getModel=function(e,t){if(e>=0&&t>=0&&e<this.ncols)return this.model_map[e+t*this.ncols]},e.prototype.format=function(e,t,r){return void 0===t&&(t=e.col),void 0===r&&(r=e.row),e.col=Math.round(Math.max(Math.min(t,this.ncols-e.colspan),0)),e.row=Math.round(Math.max(r,0)),e},e.prototype.trim=function(){for(var e=Math.ceil(this.model_map.length/this.ncols),t=[],r=1;r<e;r++)for(var n=0;n<this.ncols;n++){var o=r*this.ncols+n,i=this.model_map[o];if(i&&i.row===r){var a=this._pathTest([i],[0,-r-1],i);a>0&&(t.push(i),this.move([i],[0,-a])),n+=i.colspan-1}}return t},e.prototype.append=function(t){t instanceof Array||(t=[t]);for(var r=0,n=t;r<n.length;r++){var o=n[r];o.colspan>this.ncols&&(o.colspan=this.ncols);for(var i=Math.ceil(this.model_map.length/this.ncols),a=0,s=0,c={col:0,row:i,colspan:o.colspan,rowspan:o.rowspan},l=0,p=this.ncols-o.colspan;l<=p;l++){c.col=l;var u=this._pathTest([c],[0,-i-1],c);a<u&&(a=u,s=l)}o.col=s,o.row=i-a,this._fill([o],e.STATES.FILL_EACHMODEL)}},e.prototype.alloc=function(t,r){var n=this.format(o({},t)),i=this.cover(n),a=i.slice();if(0===i.length)return a;var s=this.calcWrap(i);if(r&&n.col===s.col&&n.row===s.row&&r.colspan===s.colspan&&r.rowspan===s.rowspan&&(Math.abs(t.col-s.col)+Math.abs(t.row-s.row))/(r.colspan+r.rowspan)<.06&&Math.abs(r.col-s.col)/r.colspan+Math.abs(r.row-s.row)/r.rowspan>1)this.move(i,[r.col-s.col,r.row-s.row]);else if(i.length>1&&s.colspan+s.rowspan>2*(n.colspan+n.rowspan)||!this._compress(n,i,s,t)){for(var c=0;c<i.length;c++)this._compress(n,[i[c]],i[c],void 0,!1)&&i.splice(c--,1);if(0===i.length)return a;var l=[],p=[];s=this.calcWrap(i);for(var u=n.colspan-Math.max(s.col-n.col,0)-Math.max(n.col+n.colspan-s.colspan-s.col,0),f=[{col:Math.max(n.col,s.col),row:n.row,colspan:u,rowspan:0}],_={},h=[new Array(u).fill(n.rowspan)];f.length;){var d=[],v={},y=[];for(var g in _)_[g].sort((function(e,t){return e.row-t.row}));for(c=0;c<f.length;c++){for(var m=f[c],w=h[c],b=(T=m.col)+m.colspan;T<b;T++){if(L=_[T]){for(var E=0,O=0;O<L.length-1;O++){var S=L[O];if(!(S.row<m.row))break;E+=L[O+1].row-(S.row+S.rowspan)}w[T-m.col]-=E}}if((M=Math.max.apply(Number,w))>0)if(h[c]=M,-1===(O=l.indexOf(m)))O=l.length,l.push(m),p.push(M);else{if(p[O]>=M)continue;p[O]=M}else f.splice(c,1),h.splice(c,1),c--}for(O=0;O<f.length;O++){m=f[O];var M=h[O];var T=m.col;e:for(b=T+m.colspan;T<b;T++)for(var k=m.row+m.rowspan,x=k+M;k<x;k++){var A=this.model_map[T+k*this.ncols];if(A){var P=d.indexOf(A),U=(w=void 0,x-k+Math.max(m.row-A.row,0));if(-1===P){var L,C=l.indexOf(A);if(C>=0&&p[C]>=U)continue e;d.push(A),y.push(w=new Array(A.colspan).fill(0)),(L=v[T]||(v[T]=[])).push({row:A.row,rowspan:A.rowspan})}else w=y[P];w[T-A.col]=Math.max(w[T-A.col],U);break}}}f=d,_=v,h=y}l.splice(0,1),p.splice(0,1),this.move(l,p.map((function(e){return[0,e]})),e.STATES.USE_EACHOFFSET),a=a.concat(l)}return a},e.prototype.cover=function(e){for(var t=[],r=e.col,n=e.row,o=0;o<e.rowspan;o++)for(var i=0;i<e.colspan;i++){var a=this.model_map[i+r+(o+n)*this.ncols];if(void 0!==a){~t.indexOf(a)||t.push(a);var s=a.colspan+a.col-1;i+r<s&&(i=s-r)}}return t},e.prototype.calcWrap=function(e){for(var t={col:e[0].col,row:e[0].row,colspan:e[0].colspan,rowspan:e[0].rowspan},r=1;r<e.length;r++){var n=e[r];t.col>n.col&&(t.colspan+=t.col-n.col,t.col=n.col),t.row>n.row&&(t.rowspan+=t.row-n.row,t.row=n.row),t.colspan+t.col<n.col+n.colspan&&(t.colspan+=n.col+n.colspan-t.col-t.colspan),t.rowspan+t.row<n.row+n.rowspan&&(t.rowspan+=n.row+n.rowspan-t.row-t.rowspan)}return t},e.prototype.calcOffset=function(e,t){return{l:e.col-(t.col+t.colspan),r:e.col+e.colspan-t.col,t:e.row-(t.row+t.rowspan),b:e.row+e.rowspan-t.row}},e.prototype._fill=function(t,r,n){void 0===r&&(r=0);var o=e.STATES,i=r&o.USE_CHECK?[]:void 0,a=this.model_map,s=this.model_list,c=this.ncols;e:for(var l=0;l<t.length;l++){var p=t[l];if(r&o.USE_CHECK&&(isFinite(p.colspan)||(p.colspan=1),isFinite(p.rowspan)||(p.rowspan=1),isNaN(p.col+p.row)||p.col+p.colspan>c))i.push(p);else{var u=s.indexOf(p);if(r&o.FILL_EACHMODEL){if(-1!==u)continue;s.push(p)}else u>=0&&s.splice(u,1);r&o.USE_EACHOFFSET?(p.col+=n[l][0],p.row+=n[l][1]):r&o.USE_OFFSET&&(p.col+=n[0],p.row+=n[1]);for(var f=p.col,_=p.row,h=p.colspan,d=p.rowspan,v=0;v<d;v++)for(var y=0;y<h;y++){var g=y+f+(v+_)*c;if(r&o.USE_CHECK&&void 0!==a[g]){do{for(;y--;)a[y+f+(v+_)*c]=void 0;y=h}while(v--);r&o.FILL_EACHMODEL&&s.pop(),i.push(p);continue e}a[g]=r&o.FILL_EACHMODEL?p:n}}}return i},e.prototype._pathTest=function(e,t,r){void 0===r&&(r=this.calcWrap(e));for(var n=0|t[0],o=0|t[1],i=0,a=0,s=0,c=n&&n/Math.abs(n),l=o&&o/Math.abs(o);i!==n||a!==o;){if(i!==n?i+=c:a+=l,r.col+i<0||r.col+i+r.colspan>this.ncols||r.row+a<0)return s;for(var p=0,u=e;p<u.length;p++)for(var f=u[p],_=f.row,h=_+f.rowspan;_<h;_++)for(var d=f.col,v=d+f.colspan;d<v;d++){var y=d+i+(_+a)*this.ncols;if(this.model_map[y]&&-1===e.indexOf(this.model_map[y]))return s}s+=1}return!0},e.prototype._compress=function(e,t,r,n,o){void 0===t&&(t=this.cover(e)),void 0===r&&(r=this.calcWrap(t)),void 0===o&&(o=!0);var i=e.rowspan/e.colspan,a=r.colspan/r.rowspan,s=this.calcOffset(e,r),c=n?this.calcOffset(n,r):s,l=[Math.abs(i*c.l),[s.l,0]],p=[Math.abs(i*c.r),[s.r,0],l];l.push(p),p.push(l);var u,f=[Math.abs(a*c.t),[0,s.t]];o&&(u=[Math.abs(a*c.b),[0,s.b]],f.push(u),u.push(f));for(var _=(o?[l,p,f,u]:[l,p,f]).sort((function(e,t){return e[0]-t[0]})),h=0;h<_.length;h++){var d=_.lastIndexOf(_[h][2]);if(d>h&&(_.splice(d,1),_.splice(h+1,0,_[h][2])),!0===this._pathTest(t,_[h][1],r))return this.move(t,_[h][1]),!0}return!1},e.STATES=n,e}();t.default=i},,function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(4),s=function(e){function t(t,r,n){void 0===n&&(n={});var o=e.call(this,r,n.ncols)||this;return o.vessel=t,o.inputListener=null,o.space={top:0,right:0,bottom:0,left:0},o.capture={top:0,right:0,bottom:0,left:0},o.target_box=null,o._longtap_timeout=null,o._client_width=0,o.dragStart=function(e,t){var r=o.vessel.getBoundingClientRect(),n=t.clientX-r.left,i=t.clientY-r.top;return o.target_box=o._get_box(n,i,e,t),!o.target_box||(e.preventDefault(),o.target_box.dragging=!0,void o.remove(o.target_box))},o.dragMove=function(e,t){o.target_box.left+=t[0],o.target_box.top+=t[1],o._longtap_timeout&&(window.clearTimeout(o._longtap_timeout),o._longtap_timeout=null),o._longtap_timeout=window.setTimeout(o._put_box,300)},o.dragEnd=function(e){o._longtap_timeout&&window.clearTimeout(o._longtap_timeout),o._put_box(!0)},o._window_resize=function(e){o._client_width!==o.vessel.clientWidth&&(o._client_width=o.vessel.clientWidth,o._update(o.model_list))},o._put_box=function(e){o._longtap_timeout=null;var t=o.target_box,r=o.cellSize,n=t.left/r,i=t.top/r;o.alloc({col:n,row:i,colspan:t.colspan,rowspan:t.rowspan},t),!0===e&&(t.dragging=!1,o.format(t,n,i),o.fill(t),o._update([t]),o.target_box=null)},o.vessel=t,o.inputListener=new a(t,{dragStart:o.dragStart,dragMove:o.dragMove,dragEnd:o.dragEnd}),o.resize(n),o.activate(),o}return o(t,e),t.prototype.disable=function(){window.removeEventListener("resize",this._window_resize),this.inputListener.disable()},t.prototype.activate=function(){this._window_resize(),window.addEventListener("resize",this._window_resize),this.inputListener.activate()},t.prototype.trim=function(){this._update(e.prototype.trim.call(this))},t.prototype.alloc=function(t,r){this._update(e.prototype.alloc.call(this,t,r))},t.prototype.remove=function(t){e.prototype.remove.call(this,t)},t.prototype.add=function(e){e instanceof Array||(e=[e]);for(var t=0,r=e;t<r.length;t++){var n=r[t];n.col>=0&&n.col+n.colspan<=this.ncols&&n.row>=0?(this.alloc(n),this.fill(n)):this.append(n)}this._update(e)},t.prototype.resize=function(e){e instanceof Object?(e.space&&(this.space=e.space),e.capture&&(this.capture=e.capture),isNaN(e.ncols)||(this.ncols=e.ncols)):this.ncols=e,this._client_width=this.vessel.clientWidth,this.update()},t.prototype.update=function(e,t){if(e){if(t instanceof Object)for(var r in t)e[r]=t[r];this.clear(e),this.alloc(e),this.fill(e),this._update([e])}else this._update(this.model_list)},t.prototype._update=function(e){for(var t,r,n,o,i=this.cellSize,a=0,s=e;a<s.length;a++){var c=s[a],l=c.space||this.space,p=l.left,u=void 0===p?0:p,f=l.right,_=void 0===f?0:f,h=l.top,d=void 0===h?0:h,v=l.bottom,y=void 0===v?0:v;t=i*c.col+u,r=i*c.row+d,n=i*c.colspan-u-_,o=i*c.rowspan-d-y,t!==c.left&&(c.left=t),r!==c.top&&(c.top=r),n!==c.width&&(c.width=n),o!==c.height&&(c.height=o)}},Object.defineProperty(t.prototype,"cellSize",{get:function(){return this._client_width/this.ncols},enumerable:!0,configurable:!0}),t.prototype._get_box=function(e,t,r,n){var o=this.cellSize,i=this.getModel(e/o|0,t/o|0);function a(e,t,r){return r>=0?t<e-r:t>=e+r&&t<e}if(i){var s=i.capture||this.capture;if(s instanceof Function){var c=s(r,n,i);return!0===c?i:!1===c?void 0:c}var l=i.space||this.space,p=l.top,u=void 0===p?0:p,f=l.right,_=void 0===f?0:f,h=l.bottom,d=void 0===h?0:h,v=l.left,y=void 0===v?0:v,g=s.top,m=void 0===g?0:g,w=s.right,b=void 0===w?0:w,E=s.bottom,O=void 0===E?0:E,S=s.left,M=void 0===S?0:S,T=i.col*o+y,k=i.row*o+u,x=i.colspan*o-_-y,A=i.rowspan*o-u-d,P=e-T-x/2,U=t-k-A/2,L=Math.sqrt(Math.pow(P,2)+Math.pow(U,2)),C=Math.atan2(U,P),D=2*Math.atan(x/A),H=(Math.PI-D)/2,N=Math.PI/2;switch(!0){case C<-H&&C>-D-H:return a(A/2,L*Math.cos(N+C),m)&&i;case Math.abs(C)<=H:return a(x/2,L*Math.cos(C),b)&&i;case C>H&&C<H+D:return a(A/2,Math.abs(L*Math.cos(N+C)),O)&&i;case Math.abs(C)>=D+H:return a(x/2,Math.abs(L*Math.cos(C)),M)&&i}}},t.MutexModel=i.default,t}(i.default);try{window.MutexBox=s}catch(e){}e.exports=s},function(e,t,r){window,e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}var f={rotate:/^rotate$/,pinch:/^pinch$/,dragMove2:/^dragMove2$/,dragStart:/^dragStart$/,dragMove:/^dragMove$/,dragEnd:/^dragEnd$/,click:/^click$/},_=function(){function e(t,r){l(this,e),this._activated_listener={},this._registered_listener={rotate:null,pinch:null,dragMove:null,dragStart:null,dragEnd:null,dragMove2:null,click:null,keyDown:{_parts:[],_reference:0},keyUp:{_reference:0},keyPress:{_reference:0}},this._bm=1,this.target=null,this._listener_options=void 0,this._listener_status={},this._points=[],this._identifiers=[],this.target=t,this._listener_options=r}return u(e,[{key:"setListener",value:function(e){for(var t in e)if(!this._listener_status[t]!=!e[t]){var r=h.EVENT_CONFIG[t],n=r[0],o=r[1],i=r[2]||this.target;e[t]?i.addEventListener(n,this[o],this._listener_options):i.removeEventListener(n,this[o],this._listener_options),this._listener_status[t]=!!e[t]}}},{key:"eventDispenser",value:function(e,t){if(this._identifiers[0]===h.MOUSE_EVENT_ID)Math.pow(2,e.button)&this._bm&&t(e,e,0);else if(e.changedTouches)for(var r=0;r<e.changedTouches.length;r++){var n=this._identifiers.indexOf(e.changedTouches[r].identifier);-1!==n&&t(e,e.changedTouches[r],n)}}},{key:"_is_mouse_event",get:function(){return this._identifiers[0]===h.MOUSE_EVENT_ID}}]),e}();_.EVENT_CONFIG={MOUSE_DOWN:["mousedown","cursorDown"],MOUSE_MOVE:["mousemove","cursorMove",window],MOUSE_UP:["mouseup","cursorUp",window],TOUCH_START:["touchstart","cursorDown"],TOUCH_MOVE:["touchmove","cursorMove",window],TOUCH_END:["touchend","cursorUp",window],TOUCH_CANCEL:["touchcancel","cursorUp",window],KEY_DOWN:["keydown","keyDown"],KEY_UP:["keyup","keyUp"],KEY_PRESS:["keypress","keyPress"]},_.CURSOR_EVENT_HANDLES=Object.keys(f),_.STATES={IS_DRAG:1,IS_ROTATE:2,IS_PINCH:4,MOUSE_DOWN:"MOUSE_DOWN",MOUSE_MOVE:"MOUSE_MOVE",MOUSE_UP:"MOUSE_UP",TOUCH_START:"TOUCH_START",TOUCH_MOVE:"TOUCH_MOVE",TOUCH_END:"TOUCH_END",TOUCH_CANCEL:"TOUCH_CANCEL",KEY_DOWN:"KEY_DOWN",KEY_UP:"KEY_UP",KEY_PRESS:"KEY_PRESS"},_.PATTERN_MAP=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},f,{},{keyDown:/^\S+_keyDown$/,keyUp:/^\S+_keyUp$/,keyPress:/^\S+_keyPress$/}),_.MOUSE_EVENT_ID=-9007199254740991,_._PRIVATE_METHODS={update_key_listener:function(e,t,r,n){h._PRIVATE_METHODS.match_keys(t,(function(t){var o=e[t];o||(o=e[t]=[]);var i=o.indexOf(r);n?i>=0&&(e._reference--,o.length>1?o.splice(i,1):delete e[t]):(e._reference++,~i||o.push(r))}))},match_keys:function(e,t){var r=e.match(/(\w+?|\ )(?=$|\||\,|\+)/g);if(r=r?r.map((function(e){return e.toLocaleLowerCase()})):[],!t)return r;var n=r,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}if(t(a))break}},get_keys:function(e){return e.code&&e.key!==e.code?[e.key.toLocaleLowerCase(),e.code.toLocaleLowerCase()]:[e.key.toLocaleLowerCase()]}},_._LISTENER_PREPROCESSOR={keyDown:function(e,t,r){var n,o=e.slice(0,-8).split(","),i=r?function(e,r,n){if(n){var o=e[r];if(o){var i=o._listeners.indexOf(t);-1!==i&&(o._listeners.splice(i,1),function e(t){var r=t._parent;--t._reference<=0&&r&&(delete r[t._key],e(r))}(o))}}}:function(e,r,o){var i=e[r];i||((i=e[r]={_parent:e,_key:r,_reference:0,_parts:e._parts.concat(r)})._path=i._parts.join("+"),e._reference++),n.push(i),o&&(i._reference++,i._listeners?-1===i._listeners.indexOf(t)&&i._listeners.push(t):i._listeners=[t])};o.forEach((function(e){n=[this._registered_listener.keyDown],e.split("+").forEach((function(e,t,r){var o=n,a=h._PRIVATE_METHODS.match_keys(e),s=r.length===t+1;n=[];var c=o,l=Array.isArray(c),p=0;for(c=l?c:c[Symbol.iterator]();;){var u;if(l){if(p>=c.length)break;u=c[p++]}else{if((p=c.next()).done)break;u=p.value}var f=u,_=a,d=Array.isArray(_),v=0;for(_=d?_:_[Symbol.iterator]();;){var y;if(d){if(v>=_.length)break;y=_[v++]}else{if((v=_.next()).done)break;y=v.value}i(f,y,s)}}}),this)}),this)},keyUp:function(e,t,r){h._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyUp,e,t,r)},keyPress:function(e,t,r){h._PRIVATE_METHODS.update_key_listener(this._registered_listener.keyPress,e,t,r)}};var h=function(e){function t(e,r,n){var o;return l(this,t),(o=a(this,s(t).call(this,e,n)))._mesh_value=4*(window.devicePixelRatio||1),o._process_status=0,o._process_values={kd_tasks:[]},o.cursorDown=function(e){var r,n=o._points;if(o._identifiers[0]!==t.MOUSE_EVENT_ID)if(e.changedTouches&&n.length<o._max_points){var i=e.changedTouches,a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var c;if(a){if(s>=i.length)break;c=i[s++]}else{if((s=i.next()).done)break;c=s.value}var l=c;if(-1===o._identifiers.indexOf(l.identifier)){r=l;break}}}else 0===n.length&&Math.pow(2,e.button)&o._bm&&(r=e);if(r){var p=t.CURSOR_EVENT_HANDLES.length;if(0===n.length){var u=o._registered_listener,f=u.dragStart&&u.dragStart(e,r)||!1;if(!0===f)return;p=0,t.CURSOR_EVENT_HANDLES.reduce((function(e,t){return u[t]&&(!1===f||~f.indexOf(t))?(p++,e[t]=u[t]):delete e[t],e}),o._activated_listener)}(p>1||p>0&&!activated_listener.dragStart)&&o._registPoint(e,r)}},o._move=function(e,t,r){var n=o._activated_listener,i=o._points[r];if(n.dragMove){var a=[t.pageX-i.mx,t.pageY-i.my];n.dragMove(e,a)?(i.mx=t.pageX-a[0],i.my=t.pageY-a[1]):(i.mx=t.pageX,i.my=t.pageY)}n.click&&Math.abs(t.pageX-i.dx)+Math.abs(t.pageY-i.dy)>o._mesh_value&&(n.click=!1)},o._move2=function(e,r,n){var i=t.STATES,a=o._activated_listener,s=o._process_values,c=o._points,l=c[n],p=c[1===n?0:1],u=r.pageX-l.mx,f=r.pageY-l.my;if(a.dragMove2){var _=[u/2,f/2];a.dragMove2(e,_)&&(u-=2*_[0],f-=2*_[1])}l.mx=l.mx+u,l.my=l.my+f;var h=(l.mx+p.mx)/2,d=(l.my+p.my)/2;if(a.pinch){var v=Math.sqrt(Math.pow(l.mx-p.mx,2)+Math.pow(l.my-p.my,2));o._process_status&i.IS_PINCH?a.pinch(e,-(s.sd-(s.sd=v))):Math.abs(v-s.sd)>o._mesh_value&&(o._process_status|=i.IS_PINCH,a.pinch(e,-(s.sd-(s.sd=v)),[h,d]))}if(a.rotate){var y=0===n?1:n,g=c[0].mx-c[y].mx,m=c[0].my-c[y].my,w=Math.atan2(m,g);w*s.ra<=0&&(s.ra=-s.ra),o._process_status&i.IS_ROTATE?(a.rotate(e,w-s.ra),s.ra=w):Math.abs(w-s.ra)>.01*Math.PI&&(o._process_status|=i.IS_ROTATE,a.rotate(e,w-s.ra,[h,d]),s.ra=w)}},o.cursorMove=function(e){o.eventDispenser(e,o._points.length<2?o._move:o._move2)},o._leave=function(e,r,n){var a;o._identifiers.splice(n,1),o._points.splice(n,1);var s=t.STATES,c=o._identifiers.length,l=o._activated_listener;switch(!0){case c<1:o.setListener((i(a={},s.MOUSE_DOWN,!0),i(a,s.MOUSE_MOVE,!1),i(a,s.MOUSE_UP,!1),i(a,s.TOUCH_MOVE,!1),i(a,s.TOUCH_END,!1),i(a,s.TOUCH_CANCEL,!1),a)),o._process_status=0,l.dragEnd&&l.dragEnd(e,r),l.click&&l.click(e,r);break;case c<o._max_points:if(o._process_status=s.IS_DRAG,e.targetTouches&&e.targetTouches.length>=o._max_points){var p=e.targetTouches,u=Array.isArray(p),f=0;for(p=u?p:p[Symbol.iterator]();;){var _;if(u){if(f>=p.length)break;_=p[f++]}else{if((f=p.next()).done)break;_=f.value}var h=_;if(-1===o._identifiers.indexOf(h.identifier)){o._registPoint(e,h);break}}}}},o.cursorUp=function(e){o.eventDispenser(e,o._leave)},o.keyDown=function(e){var r=o._process_values.kd_tasks;function n(t){if(t){for(var n=t._listeners?t._listeners.length:0,o=0;o<n;o++)if(!0===t._listeners[o](e,t._path))return!0;t._reference>n&&-1===r.indexOf(t)&&r.push(t)}}var i=t._PRIVATE_METHODS.get_keys(e);if(!r.some((function(e){return i.some((function(t){return n(e[t])}))}))){var a=i,s=Array.isArray(a),c=0;for(a=s?a:a[Symbol.iterator]();;){var l;if(s){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}var p=l;if(n(o._registered_listener.keyDown[p]))break}}},o.keyUp=function(e){for(var r=t._PRIVATE_METHODS.get_keys(e),n=o._process_values.kd_tasks,i=function(e){r.some((function(t){return-1!==n[e]._parts.indexOf(t)}))&&n.splice(e--,1),a=e},a=0;a<n.length;a++)i(a);var s=o._registered_listener.keyUp,c=r,l=Array.isArray(c),p=0;for(c=l?c:c[Symbol.iterator]();;){var u;if(l){if(p>=c.length)break;u=c[p++]}else{if((p=c.next()).done)break;u=p.value}var f=u;s[f]&&s[f].some((function(t){return t(e)}))}},o.keyPress=function(e){var r=t._PRIVATE_METHODS.get_keys(e),n=o._registered_listener.keyPress,i=r,a=Array.isArray(i),s=0;for(i=a?i:i[Symbol.iterator]();;){var c;if(a){if(s>=i.length)break;c=i[s++]}else{if((s=i.next()).done)break;c=s.value}var l=c;n[l]&&n[l].some((function(t){return t(e)}))}},o.registListener(r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),u(t,[{key:"on",value:function(e,t){return this.updateListener(i({},e,t))}},{key:"off",value:function(e,t){return this.updateListener(i({},e,t),!0)}},{key:"activate",value:function(){this.updateListener()}},{key:"disable",value:function(){var e=this;this.setListener(Object.keys(this._listener_status).reduce((function(t,r){return e._listener_status[r]&&(t[r]=!1),t}),{}))}},{key:"updateListener",value:function(e,r){var n,o=this._registered_listener,a=t.STATES;if(e)for(var s in e)for(var c in t.PATTERN_MAP)t.PATTERN_MAP[c].test(s)&&(t._LISTENER_PREPROCESSOR[c]?e[s]&&t._LISTENER_PREPROCESSOR[c].call(this,s,e[s],r):o[c]=r?null:e[s]);this._max_points=o.pinch||o.rotate||o.dragMove2?2:1;var l=!!(o.dragStart||o.dragMove||o.dragMove2||o.dragEnd||o.click||o.pinch||o.rotate);return this.setListener((i(n={},a.MOUSE_DOWN,l),i(n,a.TOUCH_START,l),i(n,a.KEY_DOWN,o.keyDown._reference>0),i(n,a.KEY_UP,o.keyDown._reference>0||o.keyUp._reference>0),i(n,a.KEY_PRESS,o.keyPress._reference>0),n)),this}},{key:"_registPoint",value:function(e,r){var n,o=t.STATES,a=this._points,s=this._activated_listener;switch(a.push({dx:r.pageX,dy:r.pageY,mx:r.pageX,my:r.pageY}),this._identifiers.push(isNaN(r.identifier)?t.MOUSE_EVENT_ID:r.identifier),a.length){case 1:this._process_status=o.IS_DRAG;var c=this._is_mouse_event;this.setListener((i(n={},o.MOUSE_DOWN,c),i(n,o.MOUSE_MOVE,c),i(n,o.MOUSE_UP,c),i(n,o.TOUCH_MOVE,!c),i(n,o.TOUCH_END,!c),i(n,o.TOUCH_CANCEL,!c),n));break;case 2:this._process_values.sd=Math.sqrt(Math.pow(a[0].mx-a[1].mx,2)+Math.pow(a[0].my-a[1].my,2)),this._process_values.ra=Math.atan2(a[0].my-a[1].my,a[0].mx-a[1].mx),s.click&&(s.click=!1)}}},{key:"registListener",value:function(e){this.updateListener(e)}},{key:"removeListener",value:function(e){e&&this.updateListener(e,!0)}}]),t}(_);try{window.InputListener=h}catch(e){}e.exports=h}])},,,,,,function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(3),i=document.createElement("ul");i.className="mutex-box",document.body.appendChild(i);var a=0,s=Object(n.get_option)(),c=Array.prototype.concat.apply([],new Array(10).fill(0).map(n.get_models));p(c);var l=new o(i,c,s);function p(e){var t=function(){if(n){if(o>=r.length)return"break";s=r[o++]}else{if((o=r.next()).done)return"break";s=o.value}var e,t=s,c=t.element?t.element():((e=document.createElement("li")).className="mb-item",t.innerHTML&&(e.innerHTML=t.innerHTML),e);if(t.style)for(var l in t.style)c.style[l]=t.style[l];i.appendChild(c);var p=t.left,u=t.top,f=t.width,_=t.height,h=t.dragging;Object.defineProperties(t,{left:{get:function(){return p},set:function(e){p=e,c.style.left=p+"px"}},top:{get:function(){return u},set:function(e){u=e,c.style.top=u+"px"}},width:{get:function(){return f},set:function(e){f=e,c.style.width=f+"px"}},height:{get:function(){return _},set:function(e){_=e,c.style.height=_+"px"}},dragging:{get:function(){return h},set:function(e){h=e,c.style.zIndex=++a,c.className=h?"mb-item dragging":"mb-item"}}})},r=e,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var s;if("break"===t())break}return e}btn_col_inc.onclick=function(){l.resize(++s.ncols)},btn_col_dec.onclick=function(){l.resize(--s.ncols)},btn_trim.onclick=function(){l.trim()},btn_add.onclick=function(){l.add(p(Object(n.get_models)().map((function(e){return e.col=void 0,e}))))},console.log(l)}])}));
//# sourceMappingURL=test.js.map